# PRD-0001: WSOPTV 프론트엔드 UI 설계

| 항목 | 내용 |
|------|------|
| **문서 ID** | PRD-0001 |
| **제목** | WSOPTV 프론트엔드 목업 UI 설계 |
| **상태** | Draft |
| **작성일** | 2024-12-11 |
| **작성자** | Claude |
| **관련 이슈** | - |

---

## 1. 개요

### 1.1 배경
WSOPTV는 프라이빗 포커 VOD 스트리밍 플랫폼으로, 백엔드 API(wsoptv_v2)가 완성되었으나 프론트엔드 UI가 없는 상태입니다. 사용자 친화적인 웹 인터페이스가 필요합니다.

### 1.2 목표
- shadcn/ui 기반의 현대적인 UI 설계
- 백엔드 API(25개 엔드포인트)와 완전 연동
- 반응형 디자인 (데스크톱, 태블릿, 모바일)
- 관리자 승인 워크플로우 지원

### 1.3 비목표 (Out of Scope)
- 모바일 앱 (React Native)
- 실시간 채팅
- 결제 시스템
- 다국어 지원 (1차 버전)

---

## 2. 사용자 페르소나

### 2.1 일반 사용자
- **설명**: 포커 VOD를 시청하는 승인된 회원
- **니즈**: 콘텐츠 검색, 스트리밍, 시청 기록 관리
- **기술 수준**: 중급 (웹 브라우징 가능)

### 2.2 관리자
- **설명**: 플랫폼을 관리하는 운영자
- **니즈**: 사용자 승인, 스트림 모니터링, 시스템 상태 확인
- **기술 수준**: 고급

---

## 3. 기능 요구사항

### 3.1 인증 (Auth)

| ID | 기능 | 우선순위 | 설명 |
|----|------|---------|------|
| AUTH-01 | 로그인 | P0 | 이메일/비밀번호 로그인 |
| AUTH-02 | 회원가입 | P0 | 이메일/비밀번호 가입 신청 |
| AUTH-03 | 승인 대기 안내 | P0 | 가입 후 관리자 승인 대기 상태 표시 |
| AUTH-04 | 로그아웃 | P0 | 세션 종료 |
| AUTH-05 | 토큰 갱신 | P1 | 자동 토큰 갱신 |

**승인 워크플로우**:
```
회원가입 → pending 상태 → 관리자 승인 → active 상태 → 로그인 가능
```

### 3.2 콘텐츠 (Content)

| ID | 기능 | 우선순위 | 설명 |
|----|------|---------|------|
| CONT-01 | 카탈로그 | P0 | 콘텐츠 목록 (페이지네이션) |
| CONT-02 | 콘텐츠 상세 | P0 | 메타데이터 표시 |
| CONT-03 | 이어보기 | P0 | 시청 진행률 기반 이어보기 |
| CONT-04 | 시청 기록 | P1 | 사용자 시청 기록 목록 |
| CONT-05 | 필터/정렬 | P2 | 날짜, 길이 등 필터 |

### 3.3 검색 (Search)

| ID | 기능 | 우선순위 | 설명 |
|----|------|---------|------|
| SRCH-01 | 키워드 검색 | P0 | 제목, 설명 검색 |
| SRCH-02 | 검색 결과 | P0 | 페이지네이션된 결과 |
| SRCH-03 | 자동완성 | P2 | 검색어 제안 |

### 3.4 스트리밍 (Stream)

| ID | 기능 | 우선순위 | 설명 |
|----|------|---------|------|
| STRM-01 | 비디오 재생 | P0 | HTTP Range 스트리밍 |
| STRM-02 | 플레이어 컨트롤 | P0 | 재생/일시정지, 탐색, 볼륨 |
| STRM-03 | 진행률 저장 | P0 | 주기적 진행률 저장 (10초마다) |
| STRM-04 | 전체화면 | P0 | 전체화면 토글 |
| STRM-05 | 키보드 단축키 | P1 | Space, 방향키, F, M |
| STRM-06 | 화질 선택 | P2 | 720p, 1080p, 4K |

### 3.5 관리자 (Admin)

| ID | 기능 | 우선순위 | 설명 |
|----|------|---------|------|
| ADMN-01 | 대시보드 | P0 | 통계 요약 (사용자, 스트림, 콘텐츠) |
| ADMN-02 | 사용자 목록 | P0 | 필터링 가능한 사용자 테이블 |
| ADMN-03 | 사용자 승인 | P0 | pending → active 변경 |
| ADMN-04 | 사용자 정지 | P1 | active → suspended 변경 |
| ADMN-05 | 스트림 모니터 | P1 | 실시간 활성 스트림 현황 |
| ADMN-06 | 캐시 상태 | P2 | L1/L2/L4 사용률 |

---

## 4. 비기능 요구사항

### 4.1 성능

| 항목 | 목표 |
|------|------|
| 초기 로딩 | < 3초 (LCP) |
| 페이지 전환 | < 500ms |
| 검색 응답 | < 200ms |
| 스트리밍 시작 | < 2초 |

### 4.2 접근성

| 항목 | 기준 |
|------|------|
| WCAG | 2.1 AA 준수 |
| 키보드 | 전체 기능 키보드 접근 가능 |
| 스크린 리더 | ARIA 레이블 적용 |

### 4.3 브라우저 지원

| 브라우저 | 버전 |
|---------|------|
| Chrome | 최신 2버전 |
| Firefox | 최신 2버전 |
| Safari | 최신 2버전 |
| Edge | 최신 2버전 |

### 4.4 반응형 브레이크포인트

| 디바이스 | 너비 |
|---------|------|
| Mobile | < 640px |
| Tablet | 640px - 1024px |
| Desktop | > 1024px |

---

## 5. 기술 스택

### 5.1 프레임워크

| 카테고리 | 선택 | 이유 |
|---------|------|------|
| Framework | Next.js 14 | App Router, RSC, 최신 React |
| UI Library | shadcn/ui | 커스터마이징 가능, Radix UI 기반 |
| Styling | Tailwind CSS | 유틸리티 우선, 빠른 개발 |
| State | Zustand | 경량, 간단한 API |
| Data Fetching | TanStack Query | 캐싱, 자동 재요청 |
| Forms | React Hook Form + Zod | 타입 안전, 검증 |
| Video | ReactPlayer | HLS/DASH 지원, 커스텀 가능 |

### 5.2 개발 도구

| 도구 | 용도 |
|------|------|
| TypeScript | 타입 안전성 |
| ESLint | 코드 린팅 |
| Prettier | 코드 포맷팅 |
| Playwright | E2E 테스트 |

---

## 6. 페이지 구조

### 6.1 라우트 맵

```
/                       # 리다이렉트 → /browse
├── (auth)/
│   ├── login           # 로그인
│   ├── register        # 회원가입
│   └── register/pending # 승인 대기
├── (main)/
│   ├── browse          # 카탈로그
│   ├── search          # 검색 결과
│   ├── watch/[id]      # 비디오 플레이어
│   └── history         # 시청 기록
└── admin/
    ├── dashboard       # 대시보드
    ├── users           # 사용자 관리
    └── streams         # 스트림 모니터링
```

### 6.2 레이아웃 구조

```
┌─────────────────────────────────────────┐
│ Header (로고, 검색, 사용자 메뉴)         │
├─────────────────────────────────────────┤
│                                         │
│           Main Content                  │
│                                         │
├─────────────────────────────────────────┤
│ Footer (선택적)                          │
└─────────────────────────────────────────┘
```

**관리자 레이아웃**:
```
┌─────────────────────────────────────────┐
│ Header                                  │
├──────────┬──────────────────────────────┤
│          │                              │
│ Sidebar  │      Main Content            │
│          │                              │
└──────────┴──────────────────────────────┘
```

---

## 7. UI 와이어프레임

### 7.1 로그인 페이지

```
┌─────────────────────────────────────┐
│                                     │
│              WSOPTV                 │
│         Private Poker VOD           │
│                                     │
│      ┌─────────────────────┐        │
│      │ Email               │        │
│      └─────────────────────┘        │
│      ┌─────────────────────┐        │
│      │ Password        👁  │        │
│      └─────────────────────┘        │
│                                     │
│      [       로그인       ]         │
│                                     │
│      계정이 없으신가요? [회원가입]   │
│                                     │
└─────────────────────────────────────┘
```

### 7.2 카탈로그 (Browse)

```
┌─────────────────────────────────────────────┐
│ WSOPTV    [🔍 검색...]         [사용자 ▼]   │
├─────────────────────────────────────────────┤
│                                             │
│ ┌─────────────────────────────────────────┐ │
│ │         Featured / Hero Banner          │ │
│ │              ▶ Play                     │ │
│ └─────────────────────────────────────────┘ │
│                                             │
│ 최근 추가됨                           더보기 │
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐    │
│ │ 🎬  │ │ 🎬  │ │ 🎬  │ │ 🎬  │ │ 🎬  │    │
│ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘    │
│                                             │
│ 이어보기                                    │
│ ┌─────┐ ┌─────┐ ┌─────┐                    │
│ │▓▓░░ │ │▓░░░ │ │▓▓▓░ │                    │
│ │ 🎬  │ │ 🎬  │ │ 🎬  │                    │
│ └─────┘ └─────┘ └─────┘                    │
│  45%     20%     75%                        │
│                                             │
└─────────────────────────────────────────────┘
```

### 7.3 비디오 플레이어

```
┌─────────────────────────────────────────────┐
│ ← Back                                      │
├─────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────┐ │
│ │                                         │ │
│ │              VIDEO PLAYER               │ │
│ │                                         │ │
│ │─────────────────────────────────────────│ │
│ │ ▶ ⏮ ⏭  00:45:30/02:15:00  🔊━━  ⛶ ⚙  │ │
│ └─────────────────────────────────────────┘ │
│                                             │
│ 2024 WSOP Main Event - Day 3                │
│ 진행률: ████████████░░░░░░ 45%              │
│                                             │
│ 관련 콘텐츠                                 │
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐            │
│ │ 🎬  │ │ 🎬  │ │ 🎬  │ │ 🎬  │            │
│ └─────┘ └─────┘ └─────┘ └─────┘            │
└─────────────────────────────────────────────┘
```

### 7.4 관리자 대시보드

```
┌─────────────────────────────────────────────┐
│ WSOPTV Admin                    [관리자 ▼]  │
├───────────┬─────────────────────────────────┤
│           │                                 │
│ 📊 대시보드│ ┌───────┐ ┌───────┐ ┌───────┐  │
│           │ │사용자  │ │스트림  │ │콘텐츠  │  │
│ 👥 사용자 │ │  156  │ │  12   │ │  89   │  │
│           │ └───────┘ └───────┘ └───────┘  │
│ 📺 스트림 │                                 │
│           │ 승인 대기 사용자                 │
│ ⚙️ 설정   │ ┌─────────────────────────────┐ │
│           │ │ Email        날짜    Action │ │
│           │ │ user1@...  01-15   [✓][✗]  │ │
│           │ │ user2@...  01-15   [✓][✗]  │ │
│           │ └─────────────────────────────┘ │
│           │                                 │
└───────────┴─────────────────────────────────┘
```

---

## 8. API 연동 스펙

### 8.1 백엔드 URL
- **개발**: `http://localhost:8002`
- **프로덕션**: `https://api.wsoptv.local`

### 8.2 인증
- **방식**: Bearer Token
- **헤더**: `Authorization: Bearer {token}`
- **저장**: localStorage 또는 httpOnly Cookie

### 8.3 주요 엔드포인트

| 카테고리 | 엔드포인트 | 메서드 | 용도 |
|---------|-----------|--------|------|
| Auth | `/auth/login` | POST | 로그인 |
| Auth | `/auth/register` | POST | 회원가입 |
| Auth | `/auth/me` | GET | 현재 사용자 |
| Content | `/content/` | GET | 카탈로그 |
| Content | `/content/{id}` | GET | 상세 |
| Content | `/content/{id}/progress` | GET/POST | 진행률 |
| Search | `/search/` | GET | 검색 |
| Stream | `/stream/{id}` | GET | 스트림 URL |
| Stream | `/stream/{id}/start` | POST | 스트림 시작 |
| Stream | `/stream/{id}/end` | POST | 스트림 종료 |
| Admin | `/admin/dashboard` | GET | 대시보드 |
| Admin | `/admin/users` | GET | 사용자 목록 |
| Admin | `/admin/users/{id}/approve` | POST | 승인 |

---

## 9. 디자인 시스템

### 9.1 색상 (다크 테마)

| 토큰 | HSL 값 | 용도 |
|------|--------|------|
| `--background` | `222.2 84% 4.9%` | 배경 |
| `--foreground` | `210 40% 98%` | 텍스트 |
| `--primary` | `210 40% 98%` | 주요 액션 |
| `--muted` | `217.2 32.6% 17.5%` | 비활성 |
| `--accent` | `217.2 32.6% 17.5%` | 강조 |
| `--destructive` | `0 62.8% 30.6%` | 위험 액션 |

### 9.2 타이포그래피

| 요소 | 크기 | 굵기 |
|------|------|------|
| H1 | 2.25rem | Bold |
| H2 | 1.875rem | Semibold |
| H3 | 1.5rem | Semibold |
| Body | 1rem | Regular |
| Small | 0.875rem | Regular |
| Caption | 0.75rem | Regular |

### 9.3 간격

| 토큰 | 값 |
|------|-----|
| `--spacing-xs` | 0.25rem |
| `--spacing-sm` | 0.5rem |
| `--spacing-md` | 1rem |
| `--spacing-lg` | 1.5rem |
| `--spacing-xl` | 2rem |

---

## 10. 마일스톤

### Phase 1: 핵심 기능 (2주)
- [ ] 프로젝트 셋업 (Next.js, shadcn/ui)
- [ ] 로그인/회원가입 페이지
- [ ] 카탈로그 페이지
- [ ] 비디오 플레이어

### Phase 2: 관리자 기능 (1주)
- [ ] 관리자 레이아웃
- [ ] 대시보드
- [ ] 사용자 관리 (승인/정지)

### Phase 3: 고도화 (1주)
- [ ] 검색 기능
- [ ] 시청 기록
- [ ] 스트림 모니터링

### Phase 4: 최적화 (1주)
- [ ] 성능 최적화
- [ ] E2E 테스트
- [ ] 접근성 검토

---

## 11. 위험 요소

| 위험 | 영향 | 대응 |
|------|------|------|
| HTTP Range 스트리밍 호환성 | 높음 | ReactPlayer + HLS fallback |
| 진행률 동기화 지연 | 중간 | 디바운싱 + 로컬 저장 |
| 관리자 승인 UX | 중간 | 이메일 알림 (2차) |

---

## 12. 참고 문서

| 문서 | 위치 |
|------|------|
| 프로젝트 구조 | `frontend/README.md` |
| UI 목업 | `frontend/MOCKUP.md` |
| API 타입 | `frontend/src/types/api.ts` |
| 백엔드 API | `src/blocks/*/router.py` |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 0.1.0 | 2024-12-11 | 초안 작성 |
