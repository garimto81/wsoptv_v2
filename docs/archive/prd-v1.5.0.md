# PRD: WSOPTV - Private Poker VOD Streaming Platform (Archived)

> **Archived**: 2025-12-20
> **Reason**: NAS ê¸°ë°˜ í”„ë¼ì´ë¹— ëª¨ë¸ì—ì„œ AWS Freemium ëª¨ë¸ë¡œ ì „í™˜
> **Replaced by**: [tasks/prds/0010-prd-wsoptv/00-master.md](../../tasks/prds/0010-prd-wsoptv/00-master.md)

**Version**: 1.5.0
**Date**: 2025-12-11
**Author**: Claude Code
**Status**: Archived (was: In Development)

---

## 1. Executive Summary

WSOPTVëŠ” 18TB+ í¬ì»¤ ë°©ì†¡ ì•„ì¹´ì´ë¸Œë¥¼ ìœ„í•œ **ì´ˆëŒ€ ê¸°ë°˜ í”„ë¼ì´ë¹— VOD ìŠ¤íŠ¸ë¦¬ë° í”Œë«í¼**ì…ë‹ˆë‹¤. Windows Native í™˜ê²½ì—ì„œ NASì˜ ë¯¸ë””ì–´ íŒŒì¼ì„ ì§ì ‘ ìŠ¤íŠ¸ë¦¬ë°í•˜ë©°, 4-Tier ìºì‹± ì‹œìŠ¤í…œìœ¼ë¡œ ë‹¤ì¤‘ ë™ì‹œ ì ‘ì†ì„ ì•ˆì •ì ìœ¼ë¡œ ì§€ì›í•©ë‹ˆë‹¤.

### 1.1 Vision

> "í¬ì»¤ íŒ¬ë“¤ì´ ì¢‹ì•„í•˜ëŠ” í”Œë ˆì´ì–´ì˜ ëª…ì¥ë©´ì„ ë¹ ë¥´ê²Œ ì°¾ê³ , ëŠê¹€ ì—†ì´ ì‹œì²­í•˜ëŠ” í”„ë¼ì´ë¹— ì»¤ë®¤ë‹ˆí‹° í”Œë«í¼"

### 1.2 Core Values

| ê°€ì¹˜ | ì„¤ëª… |
|------|------|
| **Simple** | ë³µì¡í•œ ë¯¸ë“¤ì›¨ì–´ ì—†ì´ ì§ì ‘ ìŠ¤íŠ¸ë¦¬ë° |
| **Fast** | 4-Tier ìºì‹±ìœ¼ë¡œ ì¦‰ì‹œ ì¬ìƒ |
| **Private** | ì´ˆëŒ€ ê¸°ë°˜, ê´€ë¦¬ì ìŠ¹ì¸ ì‹œìŠ¤í…œ |
| **Reliable** | Rate Limitingìœ¼ë¡œ ì•ˆì •ì  ë™ì‹œ ì ‘ì† |

---

## 2. Problem Statement

### 2.1 í˜„ì¬ Pain Points

| ë¬¸ì œ | ì„¤ëª… |
|------|------|
| **ì ‘ê·¼ì„±** | 18TB+ ì•„ì¹´ì´ë¸Œê°€ NASì— ì‚°ì¬, ì²´ê³„ì  íƒìƒ‰ ë¶ˆê°€ |
| **ê²€ìƒ‰** | íŠ¹ì • í”Œë ˆì´ì–´ë‚˜ í•¸ë“œë¥¼ ì°¾ìœ¼ë ¤ë©´ ì „ì²´ ì˜ìƒ ì‹œì²­ í•„ìš” |
| **ë™ì‹œì„±** | ì—¬ëŸ¬ ëª…ì´ ë™ì‹œì— NAS ì ‘ê·¼ ì‹œ ë³‘ëª© ë°œìƒ |
| **ë³´ì•ˆ** | ê³µê°œ í”Œë«í¼ ë¶€ì í•©, ì œí•œëœ ì»¤ë®¤ë‹ˆí‹° í•„ìš” |

### 2.2 Target Users

**Primary**: ì´ˆëŒ€ë°›ì€ í¬ì»¤ íŒ¬ (10-30ëª…)
- WSOP, HCL, PAD ë“± í¬ì»¤ ë°©ì†¡ ì‹œì²­
- íŠ¹ì • í”Œë ˆì´ì–´ íŒ”ë¡œìš°
- ëª…ì¥ë©´ ë°˜ë³µ ì‹œì²­

**Secondary**: ê´€ë¦¬ì (1-2ëª…)
- ì‚¬ìš©ì ìŠ¹ì¸/ê´€ë¦¬
- ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§
- ì½˜í…ì¸  ê´€ë¦¬

---

## 3. Solution Architecture

### 3.1 System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         WSOPTV Platform                                  â”‚
â”‚                    Windows Native Architecture                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚   Browser   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Web App   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   API       â”‚     â”‚
â”‚    â”‚   (User)    â”‚         â”‚   :3000     â”‚         â”‚   :8000     â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                           â”‚             â”‚
â”‚                                                           â–¼             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚                    4-Tier Cache System                          â”‚  â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚
â”‚    â”‚  â”‚ Redis   â”‚â”€â”€â–¶â”‚ Local   â”‚â”€â”€â–¶â”‚  Rate   â”‚â”€â”€â–¶â”‚   NAS   â”‚        â”‚  â”‚
â”‚    â”‚  â”‚ (Meta)  â”‚   â”‚  SSD    â”‚   â”‚ Limiter â”‚   â”‚  (SMB)  â”‚        â”‚  â”‚
â”‚    â”‚  â”‚  L1     â”‚   â”‚  L2     â”‚   â”‚   L3    â”‚   â”‚   L4    â”‚        â”‚  â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚ PostgreSQL  â”‚         â”‚ MeiliSearch â”‚         â”‚   FFmpeg    â”‚     â”‚
â”‚    â”‚  :5432      â”‚         â”‚   :7700     â”‚         â”‚  (Worker)   â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ SMB 3.0
                                    â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚     NAS     â”‚
                            â”‚   18TB+     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Technology Stack

| Layer | Technology | Purpose |
|-------|------------|---------|
| **Frontend** | SvelteKit 2, TypeScript | UI, Video Player |
| **Backend** | FastAPI, Python 3.12 | API, Streaming |
| **Database** | PostgreSQL 16 | Metadata, Users |
| **Search** | MeiliSearch 1.11 | Full-text Search |
| **Cache** | Redis 7 | L1 Cache, Sessions |
| **Storage** | Local SSD (500GB+) | L2 Hot Cache |
| **Media** | NAS (SMB 3.0) | Original Files |
| **Thumbnail** | FFmpeg 7 | Image Generation |

### 3.3 Directory Structure

```
D:\WSOPTV\
â”œâ”€â”€ web\                    # SvelteKit Frontend
â”‚   â”œâ”€â”€ src\
â”‚   â”‚   â”œâ”€â”€ routes\
â”‚   â”‚   â”‚   â”œâ”€â”€ +page.svelte           # Home
â”‚   â”‚   â”‚   â”œâ”€â”€ watch\[id]\            # Player
â”‚   â”‚   â”‚   â”œâ”€â”€ search\                # Search
â”‚   â”‚   â”‚   â”œâ”€â”€ login\                 # Login
â”‚   â”‚   â”‚   â””â”€â”€ admin\                 # Admin Dashboard
â”‚   â”‚   â””â”€â”€ lib\
â”‚   â”‚       â”œâ”€â”€ components\
â”‚   â”‚       â”œâ”€â”€ stores\
â”‚   â”‚       â””â”€â”€ api\
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ api\                    # FastAPI Backend
â”‚   â”œâ”€â”€ app\
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ routers\
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py
â”‚   â”‚   â”‚   â”œâ”€â”€ contents.py
â”‚   â”‚   â”‚   â”œâ”€â”€ stream.py
â”‚   â”‚   â”‚   â””â”€â”€ admin.py
â”‚   â”‚   â”œâ”€â”€ services\
â”‚   â”‚   â”‚   â”œâ”€â”€ cache_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ stream_service.py
â”‚   â”‚   â”‚   â””â”€â”€ thumbnail_service.py
â”‚   â”‚   â”œâ”€â”€ models\
â”‚   â”‚   â””â”€â”€ core\
â”‚   â”‚       â”œâ”€â”€ config.py
â”‚   â”‚       â””â”€â”€ security.py
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ cache\                  # Local SSD Cache
â”‚   â”œâ”€â”€ hot\                # Video files
â”‚   â””â”€â”€ thumbnails\         # Generated images
â”‚
â”œâ”€â”€ data\                   # PostgreSQL data
â”‚
â””â”€â”€ scripts\                # Management scripts
    â”œâ”€â”€ start.ps1
    â”œâ”€â”€ stop.ps1
    â””â”€â”€ backup.ps1
```

---

## 4. 4-Tier Cache System

### 4.1 Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        4-Tier Cache Hierarchy                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  Request â”€â”€â–¶ [L1: Redis] â”€â”€missâ”€â”€â–¶ [L2: SSD] â”€â”€missâ”€â”€â–¶ [L3: Rate Limit] â”‚
â”‚                   â”‚                     â”‚                      â”‚          â”‚
â”‚                  hit                   hit                   pass         â”‚
â”‚                   â”‚                     â”‚                      â”‚          â”‚
â”‚                   â–¼                     â–¼                      â–¼          â”‚
â”‚              Response             Response              [L4: NAS]        â”‚
â”‚                                                              â”‚            â”‚
â”‚                                                          Response        â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 L1: Redis Cache (Hot Metadata)

**Purpose**: ë©”íƒ€ë°ì´í„°, ì„¸ì…˜, ì‹¤ì‹œê°„ ìƒíƒœ ìºì‹±

| Key Pattern | TTL | Data |
|-------------|-----|------|
| `content:{id}` | 10ë¶„ | ì½˜í…ì¸  ë©”íƒ€ë°ì´í„° |
| `home:rows` | 5ë¶„ | í™ˆí˜ì´ì§€ Row ë°ì´í„° |
| `user:{id}:session` | 24ì‹œê°„ | ì‚¬ìš©ì ì„¸ì…˜ |
| `user:{id}:progress:{cid}` | 7ì¼ | ì‹œì²­ ì§„í–‰ë¥  |
| `stream:active` | ì‹¤ì‹œê°„ | í™œì„± ìŠ¤íŠ¸ë¦¼ ì¹´ìš´íŠ¸ |
| `stream:user:{id}` | ì‹¤ì‹œê°„ | ì‚¬ìš©ìë³„ ìŠ¤íŠ¸ë¦¼ ì¹´ìš´íŠ¸ |

```python
# Redis Cache Service
class RedisCache:
    async def get_content(self, content_id: str) -> Content | None:
        cached = await self.redis.get(f"content:{content_id}")
        if cached:
            return Content.model_validate_json(cached)
        return None

    async def set_content(self, content: Content, ttl: int = 600):
        await self.redis.set(
            f"content:{content.id}",
            content.model_dump_json(),
            ex=ttl
        )
```

### 4.3 L2: Local SSD Cache (Hot Content)

**Purpose**: ìì£¼ ì ‘ê·¼í•˜ëŠ” ë¹„ë””ì˜¤ íŒŒì¼ì„ SSDì— ë³µì‚¬í•˜ì—¬ NAS ë¶€í•˜ ë¶„ì‚°

| ì„¤ì • | ê°’ | ì„¤ëª… |
|------|-----|------|
| ê²½ë¡œ | `D:\WSOPTV\cache\hot\` | SSD ìºì‹œ ë””ë ‰í† ë¦¬ |
| ìµœëŒ€ í¬ê¸° | 500GB | LRU eviction ê¸°ì¤€ |
| ìºì‹œ ì¡°ê±´ | 7ì¼ ë‚´ 5íšŒ+ ì¡°íšŒ | Hot content ê¸°ì¤€ |
| ì •ì±… | LRU | Least Recently Used |

```python
# SSD Cache Manager
class SSDCacheManager:
    def __init__(self, cache_dir: Path, max_size_gb: int = 500):
        self.cache_dir = cache_dir
        self.max_bytes = max_size_gb * 1024 ** 3

    async def get_path(self, content_id: str, nas_path: str) -> Path:
        """ìºì‹œëœ ê²½ë¡œ ë°˜í™˜ ë˜ëŠ” NAS ê²½ë¡œ ë°˜í™˜"""
        cached = self.cache_dir / f"{content_id}.mp4"

        if cached.exists():
            # ì ‘ê·¼ ì‹œê°„ ì—…ë°ì´íŠ¸ (LRU)
            cached.touch()
            return cached

        # Hot contentë©´ ë°±ê·¸ë¼ìš´ë“œ ìºì‹± ì˜ˆì•½
        if await self._is_hot(content_id):
            asyncio.create_task(self._cache_file(content_id, nas_path))

        return Path(nas_path)

    async def _is_hot(self, content_id: str) -> bool:
        """ìµœê·¼ 7ì¼ ë‚´ 5íšŒ ì´ìƒ ì¡°íšŒ ì—¬ë¶€"""
        count = await db.scalar(
            select(func.count()).where(
                ViewEvent.content_id == content_id,
                ViewEvent.created_at > datetime.now() - timedelta(days=7)
            )
        )
        return count >= 5

    async def _cache_file(self, content_id: str, nas_path: str):
        """NAS â†’ SSD ë³µì‚¬ (ì €ì†, ë°±ê·¸ë¼ìš´ë“œ)"""
        await self._ensure_space(Path(nas_path).stat().st_size)
        # robocopyë¡œ ì €ì† ë³µì‚¬ (NAS ë¶€í•˜ ìµœì†Œí™”)
        await asyncio.subprocess.create_subprocess_exec(
            "robocopy", Path(nas_path).parent, self.cache_dir,
            Path(nas_path).name, "/Z", "/IPG:100"  # ì¬ì‹œì‘ ê°€ëŠ¥, 100ms ê°­
        )

    async def _ensure_space(self, required: int):
        """LRU ë°©ì‹ìœ¼ë¡œ ê³µê°„ í™•ë³´"""
        while self._current_size() + required > self.max_bytes:
            oldest = min(self.cache_dir.glob("*.mp4"), key=lambda p: p.stat().st_atime)
            oldest.unlink()
```

### 4.4 L3: Rate Limiter (Concurrency Control)

**Purpose**: NAS ë™ì‹œ ì ‘ì† ì œí•œìœ¼ë¡œ ëŒ€ì—­í­ ë³´í˜¸

| ì œí•œ | ê°’ | ì„¤ëª… |
|------|-----|------|
| ì „ì²´ ë™ì‹œ ìŠ¤íŠ¸ë¦¼ | 20 | ì„œë²„ ì „ì²´ |
| ì‚¬ìš©ìë‹¹ ìŠ¤íŠ¸ë¦¼ | 3 | ê°œë³„ ì‚¬ìš©ì |
| ëŒ€ê¸°ì—´ | 10 | ì´ˆê³¼ ì‹œ ëŒ€ê¸° |

```python
# Rate Limiter
class StreamRateLimiter:
    MAX_GLOBAL = 20
    MAX_PER_USER = 3

    async def acquire(self, user_id: str) -> tuple[bool, str]:
        """ìŠ¤íŠ¸ë¦¼ ìŠ¬ë¡¯ íšë“ ì‹œë„"""
        global_count = int(await self.redis.get("stream:active") or 0)
        user_count = int(await self.redis.get(f"stream:user:{user_id}") or 0)

        if global_count >= self.MAX_GLOBAL:
            return False, "ì„œë²„ ë™ì‹œ ì ‘ì† í•œë„ ì´ˆê³¼. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”."

        if user_count >= self.MAX_PER_USER:
            return False, f"ë™ì‹œ ì¬ìƒ {self.MAX_PER_USER}ê°œ ì´ˆê³¼"

        # ìŠ¬ë¡¯ íšë“
        pipe = self.redis.pipeline()
        pipe.incr("stream:active")
        pipe.incr(f"stream:user:{user_id}")
        pipe.expire("stream:active", 3600)
        pipe.expire(f"stream:user:{user_id}", 3600)
        await pipe.execute()

        return True, "OK"

    async def release(self, user_id: str):
        """ìŠ¤íŠ¸ë¦¼ ìŠ¬ë¡¯ ë°˜í™˜"""
        pipe = self.redis.pipeline()
        pipe.decr("stream:active")
        pipe.decr(f"stream:user:{user_id}")
        await pipe.execute()
```

### 4.5 L4: NAS (Cold Storage)

**Purpose**: ì›ë³¸ ë¹„ë””ì˜¤ íŒŒì¼ ì €ì¥ì†Œ

| ì„¤ì • | ê°’ |
|------|-----|
| Protocol | SMB 3.0 |
| Host | `\\10.10.100.122\GGPNAs` |
| Mount | `Z:\ARCHIVE` |
| Bandwidth | 1Gbps (â‰ˆ125MB/s) |

```powershell
# NAS ë§ˆìš´íŠ¸ ìŠ¤í¬ë¦½íŠ¸ (scripts/mount-nas.ps1)
$nasPath = "\\10.10.100.122\GGPNAs"
$drive = "Z:"

if (-not (Test-Path $drive)) {
    net use $drive $nasPath /persistent:yes
    Write-Host "NAS mounted at $drive" -ForegroundColor Green
}
```

---

## 5. Core Features

### 5.1 Authentication (ê´€ë¦¬ì ìŠ¹ì¸ ë°©ì‹)

#### 5.1.1 ì´ˆê¸° ê´€ë¦¬ì ê³„ì •

í”Œë«í¼ ì„¤ì¹˜ ì‹œ ê¸°ë³¸ ê´€ë¦¬ì ê³„ì •ì´ ìƒì„±ë©ë‹ˆë‹¤:

| í•„ë“œ | ê°’ |
|------|-----|
| **Username** | `garimto` |
| **Password** | `1234` |
| **Role** | `admin` |
| **Status** | `active` |

> âš ï¸ ë³´ì•ˆ: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ë°˜ë“œì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•˜ì„¸ìš”.

#### 5.1.2 íšŒì›ê°€ì… í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         íšŒì›ê°€ì… Flow                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   [íšŒì›ê°€ì… í˜ì´ì§€]                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚   â”‚  ì•„ì´ë”” (username) â”‚  â† ì˜ë¬¸/ìˆ«ì, 4-20ì                          â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                â”‚
â”‚   â”‚  ë¹„ë°€ë²ˆí˜¸          â”‚  â† 8ì ì´ìƒ                                    â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                â”‚
â”‚   â”‚  ë¹„ë°€ë²ˆí˜¸ í™•ì¸     â”‚  â† ì¼ì¹˜ ì—¬ë¶€ ê²€ì¦                              â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                â”‚
â”‚   â”‚     [ê°€ì…í•˜ê¸°]     â”‚                                                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚              â”‚                                                          â”‚
â”‚              â–¼                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚   â”‚  ìŠ¹ì¸ ëŒ€ê¸° í˜ì´ì§€  â”‚  "ê´€ë¦¬ì ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”"                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚              â”‚                                                          â”‚
â”‚              â–¼                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   â”‚ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ    â”‚ â”€â”€â”€â”€â”€â”€â–¶ â”‚    ìŠ¹ì¸/ê±°ë¶€       â”‚                â”‚
â”‚   â”‚ (Pending Users)    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚              â”‚                                                          â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚       â–¼             â–¼                                                   â”‚
â”‚  [ìŠ¹ì¸ë¨]      [ê±°ë¶€ë¨]                                                 â”‚
â”‚  status:      status:                                                   â”‚
â”‚  active       rejected                                                  â”‚
â”‚       â”‚             â”‚                                                   â”‚
â”‚       â–¼             â–¼                                                   â”‚
â”‚  [ë¡œê·¸ì¸ ê°€ëŠ¥]  [ë¡œê·¸ì¸ ë¶ˆê°€]                                           â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.1.3 ì‚¬ìš©ì ìƒíƒœ (User Status)

| ìƒíƒœ | ì„¤ëª… | ë¡œê·¸ì¸ | í˜ì´ì§€ ì ‘ê·¼ |
|------|------|--------|-------------|
| `pending` | ìŠ¹ì¸ ëŒ€ê¸° | âŒ | ìŠ¹ì¸ ëŒ€ê¸° í˜ì´ì§€ë§Œ |
| `active` | í™œì„± | âœ… | ì „ì²´ ì ‘ê·¼ ê°€ëŠ¥ |
| `rejected` | ê±°ë¶€ë¨ | âŒ | ê±°ë¶€ ì•ˆë‚´ í˜ì´ì§€ |
| `suspended` | ì •ì§€ë¨ | âŒ | ì •ì§€ ì•ˆë‚´ í˜ì´ì§€ |

**User Model**:
```python
class UserStatus(str, Enum):
    PENDING = "pending"      # ìŠ¹ì¸ ëŒ€ê¸°
    ACTIVE = "active"        # í™œì„±
    REJECTED = "rejected"    # ê±°ë¶€
    SUSPENDED = "suspended"  # ì •ì§€

class User(Base):
    __tablename__ = "users"

    id: Mapped[str] = mapped_column(primary_key=True)
    username: Mapped[str] = mapped_column(unique=True)
    email: Mapped[str] = mapped_column(unique=True)
    password_hash: Mapped[str]
    display_name: Mapped[str | None]
    status: Mapped[UserStatus] = mapped_column(default=UserStatus.PENDING)
    is_admin: Mapped[bool] = mapped_column(default=False)
    created_at: Mapped[datetime] = mapped_column(default=datetime.utcnow)
    approved_at: Mapped[datetime | None]
    approved_by: Mapped[str | None]
```

**API Endpoints**:
```
POST /api/auth/register     # íšŒì›ê°€ì… (Pending ìƒíƒœ)
POST /api/auth/login        # ë¡œê·¸ì¸ (Activeë§Œ ê°€ëŠ¥)
POST /api/auth/logout       # ë¡œê·¸ì•„ì›ƒ
GET  /api/auth/me           # í˜„ì¬ ì‚¬ìš©ì ì •ë³´
```

### 5.2 Content Browsing (Netflix-style)

#### 5.2.1 ì „ì²´ ë ˆì´ì•„ì›ƒ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ HEADER (íˆ¬ëª… ê·¸ë¼ë””ì–¸íŠ¸) â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“  â”‚
â”‚                                                                              â”‚
â”‚  WSOPTV    All  WSOP  HCL  GGMillions  GOG  MPP  PAD        ğŸ”   Admin  [Gâ–¼]â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘                                                                   â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘   WSOPTV ORIGINAL                                                 â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘                                                                   â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘   â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                              â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘   â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—  2024 Main Event            â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘   â–ˆâ–ˆâ•‘ â–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•  Final Table                â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•                              â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘   â•šâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘                                  â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘                                                                   â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘   Phil Ivey vs Daniel Negreanu - $10M íŒŸì˜ ì—­ëŒ€ê¸‰ ë¸”ëŸ¬í”„           â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘                                                                   â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘   â”‚  â–¶  ì¬ìƒ     â”‚  â”‚  â„¹  ìƒì„¸ì •ë³´  â”‚                              â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â–‘â–‘â”‚ â”‚
â”‚  â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â† Hero Billboard (í™”ë©´ 40%, ì¢Œì¸¡ ê·¸ë¼ë””ì–¸íŠ¸)              â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  ì´ì–´ì„œ ì‹œì²­í•˜ê¸°                                                        â–¶   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚   â”‚
â”‚  â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚   â”‚
â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚ â”‚ â–“â–“â–“â–‘â–‘â–‘â–‘ â”‚ â”‚ â–“â–“â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–“â–“â–“â–“â–‘â–‘â–‘ â”‚ â”‚ â–“â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–“â–“â–“â–“â–“â–‘â–‘ â”‚   â”‚
â”‚  â”‚ 45%     â”‚ â”‚ 30%     â”‚ â”‚ 15%     â”‚ â”‚ 60%     â”‚ â”‚ 5%      â”‚ â”‚ 80%     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   HCL S14    WSOP 2023   GOG Ep.45   PAD Cash    GGM Final   MPP Tour       â”‚
â”‚                                                                        â—€â”€â”€â–¶ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  ğŸ”¥ ì˜¤ëŠ˜ WSOPTV TOP 10                                                  â–¶   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ â–ˆâ–ˆâ•—  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â”Œâ”€â”€â”€â”€â”€â”€â”€â” â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â”Œâ”€â”€â”€â”€â”€â”€â”€â” â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â”Œâ”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â–ˆâ–ˆâ–ˆâ•‘ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â•šâ•â•â•â•â–ˆâ–ˆâ•—â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â•šâ•â•â•â•â–ˆâ–ˆâ•‘â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚       â”‚
â”‚ â•šâ–ˆâ–ˆâ•‘ â”‚ â–‘â–¶â–‘â–‘ â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â”‚ â–‘â–¶â–‘â–‘ â”‚     â–ˆâ–ˆâ•”â•â”‚ â–‘â–¶â–‘â–‘ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â”‚ â–‘â–¶â–‘â–‘ â”‚ ...   â”‚
â”‚  â–ˆâ–ˆâ•‘ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚  â•šâ•â•â•â–ˆâ–ˆâ•—â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚    â–ˆâ–ˆâ•”â• â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â•šâ•â•â•â•â–ˆâ–ˆâ•‘â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚       â”‚
â”‚  â–ˆâ–ˆâ•‘ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â””â”€â”€â”€â”€â”€â”€â”€â”˜    â–ˆâ–ˆâ•‘  â””â”€â”€â”€â”€â”€â”€â”€â”˜      â–ˆâ–ˆâ•‘â””â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â•šâ•â• Phil Ivey â•šâ•â•â•â•â•â•  Negreanu    â•šâ•â•  Tom Dwan       â•šâ•â• GG Squad       â”‚
â”‚      ë¸”ëŸ¬í”„          ì˜¬ì¸ì½œ             ì¿¨ëŸ¬í•¸ë“œ           í† ë„ˆë¨¼íŠ¸      â—€â”€â”€â–¶ â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  WSOP ì‹œë¦¬ì¦ˆ                                                            â–¶   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚   â”‚
â”‚  â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   2024 Main   2024 $25K   2023 Main   2023 $50K   2022 Main   2022 HU       â”‚
â”‚                                                                        â—€â”€â”€â–¶ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  HCL (Hustler Casino Live)                                              â–¶   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚   â”‚
â”‚  â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   S14 Ep.10  S14 Ep.09   S14 Ep.08   S14 Ep.07   S14 Ep.06   S14 Ep.05     â”‚
â”‚                                                                        â—€â”€â”€â–¶ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  GGMillions, PAD, GOG, MPP ë“± ì¹´í…Œê³ ë¦¬ë³„ Row ì¶”ê°€...                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.2.2 Hero Billboard ìƒì„¸

í™”ë©´ ìƒë‹¨ 40%ë¥¼ ì°¨ì§€í•˜ëŠ” ëŒ€í˜• ë°°ë„ˆë¡œ ì¶”ì²œ ì½˜í…ì¸ ë¥¼ ê°•ì¡°í•©ë‹ˆë‹¤.

| ìš”ì†Œ | ì„¤ëª… |
|------|------|
| **ë°°ê²½** | ì½˜í…ì¸  ì¸ë„¤ì¼ í’€ìŠ¤í¬ë¦° (ë¸”ëŸ¬ ì²˜ë¦¬) |
| **ê·¸ë¼ë””ì–¸íŠ¸** | ì¢Œì¸¡ì—ì„œ ìš°ì¸¡ìœ¼ë¡œ ì–´ë‘ì›Œì§€ëŠ” ì˜¤ë²„ë ˆì´ |
| **ì½˜í…ì¸  ì •ë³´** | ë¡œê³ /ì œëª©, ì„¤ëª… (2ì¤„), ë©”íƒ€ ì •ë³´ |
| **ì•¡ì…˜ ë²„íŠ¼** | [â–¶ ì¬ìƒ] [â„¹ ìƒì„¸ì •ë³´] |
| **ìë™ ì „í™˜** | 10ì´ˆë§ˆë‹¤ ë‹¤ìŒ ì¶”ì²œ ì½˜í…ì¸ ë¡œ ì „í™˜ |

#### 5.2.3 Row ë ˆì´ì•„ì›ƒ

ê° RowëŠ” ê°€ë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ì½˜í…ì¸  ì¹´ë“œ ëª©ë¡ì…ë‹ˆë‹¤.

| Row íƒ€ì… | ì„¤ëª… | ì •ë ¬ ê¸°ì¤€ |
|----------|------|----------|
| **ì´ì–´ì„œ ì‹œì²­í•˜ê¸°** | ì‹œì²­ ì¤‘ë‹¨ ì§€ì ì´ ìˆëŠ” ì½˜í…ì¸  | ìµœê·¼ ì‹œì²­ ìˆœ |
| **TOP 10** | ì¡°íšŒìˆ˜ ê¸°ì¤€ ì¸ê¸° ì½˜í…ì¸  (í° ìˆœìœ„ ìˆ«ì) | ì¡°íšŒìˆ˜ ë‚´ë¦¼ì°¨ìˆœ |
| **ì¹´í…Œê³ ë¦¬ë³„** | WSOP, HCL, GGMillions ë“± | ìµœì‹  ë“±ë¡ ìˆœ |
| **ìµœê·¼ ì¶”ê°€** | ì‹ ê·œ ë“±ë¡ ì½˜í…ì¸  | ë“±ë¡ì¼ ë‚´ë¦¼ì°¨ìˆœ |

#### 5.2.4 ì¹´ë“œ Hover í™•ëŒ€ íš¨ê³¼

```
[ê¸°ë³¸ ìƒíƒœ]                         [Hover ìƒíƒœ - 150% í™•ëŒ€]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚                        â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚ â–‘â–‘â–¶â–‘â–‘â–‘ â”‚          â”€â”€â”€â–¶          â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚                        â”‚ â–‘â–‘â–‘â–‘â–‘â–‘  â–¶  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
 WSOP 2024                         â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
                                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                   â”‚ WSOP 2024 Main Event    â”‚
                                   â”‚ Final Table             â”‚
                                   â”‚                         â”‚
                                   â”‚ â–¶  âŠ•  ğŸ‘  ğŸ‘  â–¼        â”‚
                                   â”‚                         â”‚
                                   â”‚ 3h 45m â”‚ HD â”‚ 2024      â”‚
                                   â”‚ í¬ì»¤ â€¢ í† ë„ˆë¨¼íŠ¸ â€¢ í•˜ì´ìŠ¤í…Œì´í¬ â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ìƒíƒœ | ë™ì‘ |
|------|------|
| **ê¸°ë³¸** | ì¸ë„¤ì¼ + ì œëª© |
| **Hover (0.3ì´ˆ)** | 150% í™•ëŒ€, ê·¸ë¦¼ì ê°•í™” |
| **Hover (1ì´ˆ í›„)** | ë¯¸ë¦¬ë³´ê¸° ì˜ìƒ ìë™ì¬ìƒ (ìŒì†Œê±°) |
| **Hover ìƒì„¸** | ì œëª©, ë©”íƒ€ì •ë³´, ì•¡ì…˜ ë²„íŠ¼, ì¥ë¥´ íƒœê·¸ |

#### 5.2.5 ìƒ‰ìƒ íŒ”ë ˆíŠ¸

| ìš©ë„ | ìƒ‰ìƒ ì½”ë“œ | ì„¤ëª… |
|------|----------|------|
| **ë°°ê²½** | `#141414` | ë©”ì¸ ë°°ê²½ |
| **ì¹´ë“œ ë°°ê²½** | `#181818` | ì¹´ë“œ/Row ë°°ê²½ |
| **ì¹´ë“œ í˜¸ë²„** | `#2F2F2F` | í˜¸ë²„ ì‹œ ì¹´ë“œ ë°°ê²½ |
| **ê°•ì¡° (Red)** | `#E50914` | ë¡œê³ , ë²„íŠ¼, ì•¡ì„¼íŠ¸ |
| **ì„±ê³µ (Green)** | `#46D369` | ì§„í–‰ë¥  ë°”, ì¹´í…Œê³ ë¦¬ ë±ƒì§€ |
| **í…ìŠ¤íŠ¸ (White)** | `#FFFFFF` | ë©”ì¸ í…ìŠ¤íŠ¸ |
| **í…ìŠ¤íŠ¸ (Gray)** | `#B3B3B3` | ì„œë¸Œ í…ìŠ¤íŠ¸ |
| **í…ìŠ¤íŠ¸ (Muted)** | `#808080` | ë¹„í™œì„± í…ìŠ¤íŠ¸ |

#### 5.2.6 êµ¬í˜„ ì»´í¬ë„ŒíŠ¸

```typescript
// í•µì‹¬ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
components/
â”œâ”€â”€ HeroBillboard/
â”‚   â”œâ”€â”€ HeroBillboard.tsx      // ë©”ì¸ ë°°ë„ˆ
â”‚   â”œâ”€â”€ HeroContent.tsx        // ì½˜í…ì¸  ì •ë³´
â”‚   â””â”€â”€ HeroControls.tsx       // ì¬ìƒ/ìƒì„¸ ë²„íŠ¼
â”œâ”€â”€ ContentRow/
â”‚   â”œâ”€â”€ ContentRow.tsx         // Row ì»¨í…Œì´ë„ˆ
â”‚   â”œâ”€â”€ RowHeader.tsx          // Row ì œëª©
â”‚   â””â”€â”€ ScrollControls.tsx     // ì¢Œìš° ìŠ¤í¬ë¡¤ ë²„íŠ¼
â”œâ”€â”€ ContentCard/
â”‚   â”œâ”€â”€ ContentCard.tsx        // ê¸°ë³¸ ì¹´ë“œ
â”‚   â”œâ”€â”€ CardHover.tsx          // Hover í™•ëŒ€ ìƒíƒœ
â”‚   â”œâ”€â”€ CardPreview.tsx        // ë¯¸ë¦¬ë³´ê¸° ì˜ìƒ
â”‚   â””â”€â”€ TopTenCard.tsx         // TOP 10 ìˆœìœ„ ì¹´ë“œ
â””â”€â”€ ProgressBar/
    â””â”€â”€ ProgressBar.tsx        // ì‹œì²­ ì§„í–‰ë¥  ë°”
```

**Row Types**:
```python
class RowType(str, Enum):
    CONTINUE_WATCHING = "continue_watching"  # ì´ì–´ë³´ê¸°
    RECENTLY_ADDED = "recently_added"        # ìµœê·¼ ì¶”ê°€
    CATALOG = "catalog"                      # ì¹´íƒˆë¡œê·¸ë³„ (WSOP, HCL, PAD...)
    TRENDING = "trending"                    # ì¸ê¸° ì½˜í…ì¸ 

class RowData(BaseModel):
    id: str
    type: RowType
    title: str
    items: list[ContentCard]
    view_all_url: str | None = None
```

**API Endpoints**:
```
GET /api/home                    # í™ˆí˜ì´ì§€ Row ëª©ë¡
GET /api/contents                # ì½˜í…ì¸  ëª©ë¡ (í•„í„°/í˜ì´ì§€ë„¤ì´ì…˜)
GET /api/contents/{id}           # ì½˜í…ì¸  ìƒì„¸
GET /api/catalogs                # ì¹´íƒˆë¡œê·¸ ëª©ë¡
GET /api/search?q={query}        # ê²€ìƒ‰
```

### 5.3 Video Streaming (Direct Play)

**HTTP Range Request ê¸°ë°˜ Direct Play**:
- íŠ¸ëœìŠ¤ì½”ë”© ì—†ì´ ì›ë³¸ íŒŒì¼ ì§ì ‘ ìŠ¤íŠ¸ë¦¬ë°
- ë¸Œë¼ìš°ì € ë„¤ì´í‹°ë¸Œ `<video>` íƒœê·¸ ì‚¬ìš©
- Seek ì‹œ ì¦‰ì‹œ í•´ë‹¹ ìœ„ì¹˜ë¡œ ì´ë™

```python
@router.get("/api/stream/{content_id}")
async def stream(
    content_id: str,
    request: Request,
    user: User = Depends(get_current_user),
    rate_limiter: StreamRateLimiter = Depends(),
    cache: SSDCacheManager = Depends()
):
    # 1. Rate Limit í™•ì¸
    allowed, msg = await rate_limiter.acquire(user.id)
    if not allowed:
        raise HTTPException(429, msg)

    # 2. íŒŒì¼ ê²½ë¡œ ê²°ì • (SSD ìºì‹œ ë˜ëŠ” NAS)
    content = await get_content(content_id)
    file_path = await cache.get_path(content_id, content.nas_path)

    # 3. Range í—¤ë” ì²˜ë¦¬
    range_header = request.headers.get("range")
    file_size = file_path.stat().st_size

    if range_header:
        # Partial Content (206)
        start, end = parse_range(range_header, file_size)
        return StreamingResponse(
            stream_file(file_path, start, end),
            status_code=206,
            headers={
                "Content-Range": f"bytes {start}-{end}/{file_size}",
                "Accept-Ranges": "bytes",
                "Content-Type": "video/mp4"
            }
        )
    else:
        # Full Content (200)
        return StreamingResponse(
            stream_file(file_path, 0, file_size - 1),
            headers={
                "Accept-Ranges": "bytes",
                "Content-Type": "video/mp4"
            }
        )
```

**Frontend Video Player**:
```svelte
<!-- VideoPlayer.svelte -->
<script lang="ts">
  export let contentId: string;
  export let startTime = 0;

  let video: HTMLVideoElement;

  onMount(() => {
    video.currentTime = startTime;

    // 30ì´ˆë§ˆë‹¤ ì§„í–‰ë¥  ì €ì¥
    const interval = setInterval(saveProgress, 30000);
    return () => clearInterval(interval);
  });

  async function saveProgress() {
    await fetch(`/api/progress/${contentId}`, {
      method: 'PUT',
      body: JSON.stringify({
        position: video.currentTime,
        duration: video.duration
      })
    });
  }
</script>

<video
  bind:this={video}
  src="/api/stream/{contentId}"
  controls
  autoplay
/>
```

### 5.4 Watch Progress (ì´ì–´ë³´ê¸°)

```python
class WatchProgress(Base):
    __tablename__ = "watch_progress"

    user_id: Mapped[str] = mapped_column(primary_key=True)
    content_id: Mapped[str] = mapped_column(primary_key=True)
    position: Mapped[float]          # í˜„ì¬ ìœ„ì¹˜ (ì´ˆ)
    duration: Mapped[float]          # ì „ì²´ ê¸¸ì´ (ì´ˆ)
    progress_percent: Mapped[int]    # ì§„í–‰ë¥  (0-100)
    updated_at: Mapped[datetime]

# API
@router.put("/api/progress/{content_id}")
async def update_progress(content_id: str, data: ProgressUpdate, user: User = Depends()):
    progress = await get_or_create_progress(user.id, content_id)
    progress.position = data.position
    progress.duration = data.duration
    progress.progress_percent = int((data.position / data.duration) * 100)
    progress.updated_at = datetime.utcnow()
    await db.commit()

@router.get("/api/progress/{content_id}")
async def get_progress(content_id: str, user: User = Depends()):
    progress = await get_progress(user.id, content_id)
    return {"position": progress.position if progress else 0}
```

### 5.5 Thumbnail Generation (On-Demand)

```python
class ThumbnailService:
    def __init__(self, cache_dir: Path):
        self.cache_dir = cache_dir

    async def get_poster(self, content_id: str, video_path: str) -> Path:
        """10ì´ˆ ì§€ì  í”„ë ˆì„ ì¶”ì¶œ"""
        output = self.cache_dir / content_id / "poster.jpg"

        if output.exists():
            return output

        output.parent.mkdir(parents=True, exist_ok=True)

        # FFmpegìœ¼ë¡œ í”„ë ˆì„ ì¶”ì¶œ
        proc = await asyncio.create_subprocess_exec(
            "ffmpeg", "-y",
            "-ss", "10",
            "-i", video_path,
            "-vframes", "1",
            "-vf", "scale=480:-1",
            "-q:v", "2",
            str(output)
        )
        await proc.wait()

        return output
```

---

## 6. Admin Dashboard

### 6.1 Features

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WSOPTV Admin                                    [user@admin]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  System Status                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Active Streams   12/20  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  60%           â”‚â”‚
â”‚  â”‚  SSD Cache       423/500GB  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  85%        â”‚â”‚
â”‚  â”‚  NAS Status      â— Online  (32ms latency)                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  Pending Users (3)                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Username    Email              Registered    Actions      â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚  newuser1    new@email.com      2 hours ago   [âœ“] [âœ—]     â”‚â”‚
â”‚  â”‚  newuser2    test@test.com      1 day ago     [âœ“] [âœ—]     â”‚â”‚
â”‚  â”‚  newuser3    foo@bar.com        3 days ago    [âœ“] [âœ—]     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  Active Streams                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  User        Content              Duration    Bandwidth    â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚  user1       WSOP 2024 ME Final   1h 23m      15.2 Mbps   â”‚â”‚
â”‚  â”‚  user2       HCL Episode 145      45m         12.8 Mbps   â”‚â”‚
â”‚  â”‚  user3       PAD S2E3             2h 10m      18.4 Mbps   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Admin API

```
GET  /api/admin/status           # ì‹œìŠ¤í…œ ìƒíƒœ
GET  /api/admin/users            # ì‚¬ìš©ì ëª©ë¡
GET  /api/admin/users/pending    # ìŠ¹ì¸ ëŒ€ê¸° ì‚¬ìš©ì
POST /api/admin/users/{id}/approve  # ìŠ¹ì¸
POST /api/admin/users/{id}/reject   # ê±°ë¶€
GET  /api/admin/streams          # í™œì„± ìŠ¤íŠ¸ë¦¼ ëª©ë¡
GET  /api/admin/cache            # ìºì‹œ ìƒíƒœ
```

---

## 7. Data Models

### 7.1 Database Schema

```sql
-- Users
CREATE TABLE users (
    id VARCHAR(36) PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    display_name VARCHAR(100),
    status VARCHAR(20) DEFAULT 'pending',
    is_admin BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW(),
    approved_at TIMESTAMP,
    approved_by VARCHAR(36) REFERENCES users(id)
);

-- Catalogs (WSOP, HCL, PAD, etc.)
CREATE TABLE catalogs (
    id VARCHAR(36) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    thumbnail_path VARCHAR(500),
    sort_order INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Contents (Videos)
CREATE TABLE contents (
    id VARCHAR(36) PRIMARY KEY,
    catalog_id VARCHAR(36) REFERENCES catalogs(id),
    title VARCHAR(200) NOT NULL,
    description TEXT,
    nas_path VARCHAR(500) NOT NULL,  -- NAS íŒŒì¼ ê²½ë¡œ
    duration INT,                     -- ì´ˆ ë‹¨ìœ„
    file_size BIGINT,
    thumbnail_path VARCHAR(500),
    created_at TIMESTAMP DEFAULT NOW(),
    added_at TIMESTAMP DEFAULT NOW()
);

-- Watch Progress
CREATE TABLE watch_progress (
    user_id VARCHAR(36) REFERENCES users(id),
    content_id VARCHAR(36) REFERENCES contents(id),
    position FLOAT NOT NULL,
    duration FLOAT NOT NULL,
    progress_percent INT,
    updated_at TIMESTAMP DEFAULT NOW(),
    PRIMARY KEY (user_id, content_id)
);

-- View Events (for trending & hot content detection)
CREATE TABLE view_events (
    id SERIAL PRIMARY KEY,
    user_id VARCHAR(36) REFERENCES users(id),
    content_id VARCHAR(36) REFERENCES contents(id),
    created_at TIMESTAMP DEFAULT NOW()
);

-- Indexes
CREATE INDEX idx_contents_catalog ON contents(catalog_id);
CREATE INDEX idx_progress_user ON watch_progress(user_id);
CREATE INDEX idx_view_events_content_date ON view_events(content_id, created_at);
```

### 7.2 MeiliSearch Index

```python
# ê²€ìƒ‰ ì¸ë±ìŠ¤ ì„¤ì •
contents_index = {
    "primaryKey": "id",
    "searchableAttributes": [
        "title",
        "description",
        "catalog_name"
    ],
    "filterableAttributes": [
        "catalog_id",
        "duration"
    ],
    "sortableAttributes": [
        "added_at",
        "title"
    ]
}
```

---

## 8. API Specification

### 8.1 Authentication

```yaml
POST /api/auth/register:
  request:
    username: string (required)
    email: string (required)
    password: string (required)
    display_name: string (optional)
  response:
    message: "íšŒì›ê°€ì… ì™„ë£Œ. ê´€ë¦¬ì ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”."

POST /api/auth/login:
  request:
    username: string
    password: string
  response:
    access_token: string
    user:
      id: string
      username: string
      display_name: string
      is_admin: boolean
  errors:
    401: "ì˜ëª»ëœ ì¸ì¦ ì •ë³´"
    403: "ìŠ¹ì¸ ëŒ€ê¸° ì¤‘" | "ê³„ì • ê±°ë¶€ë¨" | "ê³„ì • ì •ì§€ë¨"
```

### 8.2 Contents

```yaml
GET /api/home:
  response:
    rows:
      - id: string
        type: "continue_watching" | "recently_added" | "catalog" | "trending"
        title: string
        items: ContentCard[]
        view_all_url: string | null

GET /api/contents:
  params:
    catalog_id: string (optional)
    page: int (default: 1)
    limit: int (default: 20)
  response:
    items: Content[]
    total: int
    page: int
    pages: int

GET /api/contents/{id}:
  response:
    id: string
    title: string
    description: string
    duration: int
    thumbnail_url: string
    catalog:
      id: string
      name: string
    progress: float | null  # ë¡œê·¸ì¸ ì‹œ
```

### 8.3 Streaming

```yaml
GET /api/stream/{content_id}:
  headers:
    Range: "bytes=0-1023" (optional)
  response:
    200: Full video stream
    206: Partial content
    429: Rate limit exceeded

PUT /api/progress/{content_id}:
  request:
    position: float
    duration: float
  response:
    success: true
```

---

## 9. Configuration

### 9.1 Environment Variables

```env
# Database
DATABASE_URL=postgresql://wsoptv:password@localhost:5432/wsoptv

# Redis
REDIS_URL=redis://localhost:6379

# MeiliSearch
MEILI_HOST=http://localhost:7700
MEILI_KEY=your_master_key

# NAS
NAS_PATH=Z:\ARCHIVE

# Cache
SSD_CACHE_PATH=D:\WSOPTV\cache\hot
SSD_CACHE_MAX_GB=500
THUMBNAIL_CACHE_PATH=D:\WSOPTV\cache\thumbnails

# Rate Limiting
MAX_GLOBAL_STREAMS=20
MAX_USER_STREAMS=3

# Security
JWT_SECRET=your_jwt_secret
JWT_EXPIRE_HOURS=24

# Server
API_HOST=0.0.0.0
API_PORT=8000
WEB_PORT=3000
```

### 9.2 Service Management

```powershell
# scripts/start.ps1
Write-Host "Starting WSOPTV..." -ForegroundColor Cyan

# Mount NAS
& .\mount-nas.ps1

# Start PostgreSQL (Windows Service)
Start-Service postgresql-x64-16

# Start Redis
Start-Process redis-server -WindowStyle Hidden

# Start MeiliSearch
Start-Process meilisearch -ArgumentList "--env=production" -WindowStyle Hidden

# Start API (FastAPI)
Set-Location D:\WSOPTV\api
Start-Process python -ArgumentList "-m", "uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000" -WindowStyle Hidden

# Start Web (SvelteKit)
Set-Location D:\WSOPTV\web
Start-Process npm -ArgumentList "run", "preview" -WindowStyle Hidden

Write-Host "WSOPTV Started!" -ForegroundColor Green
Write-Host "Web: http://localhost:3000" -ForegroundColor Yellow
Write-Host "API: http://localhost:8000" -ForegroundColor Yellow
```

---

## 10. Implementation Roadmap

### Phase 1: Foundation (Week 1-2)

| Task | Priority | Days |
|------|----------|------|
| í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„± | P0 | 1 |
| PostgreSQL ì„¤ì • + ìŠ¤í‚¤ë§ˆ | P0 | 1 |
| Redis + MeiliSearch ì„¤ì • | P0 | 1 |
| FastAPI ê¸°ë³¸ êµ¬ì¡° | P0 | 2 |
| SvelteKit ê¸°ë³¸ êµ¬ì¡° | P0 | 2 |
| NAS ë§ˆìš´íŠ¸ ìë™í™” | P0 | 1 |

### Phase 2: Authentication (Week 3)

| Task | Priority | Days |
|------|----------|------|
| User ëª¨ë¸ + ë§ˆì´ê·¸ë ˆì´ì…˜ | P0 | 1 |
| Register/Login API | P0 | 2 |
| JWT í† í° ê´€ë¦¬ | P0 | 1 |
| ê´€ë¦¬ì ìŠ¹ì¸ API | P0 | 1 |
| ë¡œê·¸ì¸/ê°€ì… UI | P0 | 2 |

### Phase 3: Core Features (Week 4-5)

| Task | Priority | Days |
|------|----------|------|
| Contents ëª¨ë¸ + API | P0 | 2 |
| í™ˆí˜ì´ì§€ Row API | P0 | 2 |
| ê²€ìƒ‰ API (MeiliSearch) | P0 | 2 |
| í™ˆí˜ì´ì§€ UI | P0 | 2 |
| ì½˜í…ì¸  ë¸Œë¼ìš°ì§• UI | P0 | 2 |

### Phase 4: Streaming (Week 6-7)

| Task | Priority | Days |
|------|----------|------|
| L1 Redis ìºì‹œ | P0 | 1 |
| L2 SSD ìºì‹œ ë§¤ë‹ˆì € | P0 | 3 |
| L3 Rate Limiter | P0 | 2 |
| HTTP Range Streaming | P0 | 2 |
| Video Player UI | P0 | 2 |
| ì‹œì²­ ì§„í–‰ë¥  ì €ì¥ | P0 | 1 |

### Phase 5: Admin & Polish (Week 8)

| Task | Priority | Days |
|------|----------|------|
| Admin Dashboard UI | P1 | 2 |
| ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ API | P1 | 1 |
| ì¸ë„¤ì¼ ìƒì„± ì„œë¹„ìŠ¤ | P1 | 2 |
| í…ŒìŠ¤íŠ¸ + ë²„ê·¸ ìˆ˜ì • | P0 | 2 |
| ë¬¸ì„œí™” | P1 | 1 |

---

## 11. Success Metrics

| Metric | Target | Measurement |
|--------|--------|-------------|
| ë™ì‹œ ìŠ¤íŠ¸ë¦¼ | 20+ | Rate Limiter |
| ìŠ¤íŠ¸ë¦¼ ì‹œì‘ ì§€ì—° | < 2ì´ˆ | API ë¡œê·¸ |
| SSD ìºì‹œ íˆíŠ¸ìœ¨ | > 60% | Cache ë¡œê·¸ |
| ê²€ìƒ‰ ì‘ë‹µ ì‹œê°„ | < 100ms | MeiliSearch |
| ì„œë¹„ìŠ¤ ê°€ìš©ì„± | > 99% | Uptime |

---

## 12. Testing Strategy

### 12.1 í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ

| Level | ë¹„ìœ¨ | ë„êµ¬ | ë²”ìœ„ |
|-------|------|------|------|
| **Unit** | 70% | pytest | ê°œë³„ í•¨ìˆ˜/í´ë˜ìŠ¤ |
| **Integration** | 20% | pytest + testcontainers | API + DB + Redis |
| **E2E** | 10% | Playwright | ì „ì²´ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ |

### 12.2 Backend í…ŒìŠ¤íŠ¸ (pytest)

**ë””ë ‰í† ë¦¬ êµ¬ì¡°**:
```
api/tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ test_cache_service.py
â”‚   â”œâ”€â”€ test_stream_service.py
â”‚   â””â”€â”€ test_thumbnail_service.py
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ test_auth_api.py
â”‚   â”œâ”€â”€ test_contents_api.py
â”‚   â””â”€â”€ test_stream_api.py
â”œâ”€â”€ fixtures/
â”‚   â”œâ”€â”€ conftest.py
â”‚   â”œâ”€â”€ sample_video.mp4      # 10ì´ˆ, 1MB í…ŒìŠ¤íŠ¸ìš©
â”‚   â””â”€â”€ test_data.py
â””â”€â”€ conftest.py
```

**ì£¼ìš” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**:
```python
# Unit Tests
class TestSSDCacheManager:
    def test_cache_hit_returns_local_path(self): ...
    def test_cache_miss_returns_nas_path(self): ...
    def test_lru_eviction_removes_oldest(self): ...

class TestStreamRateLimiter:
    def test_acquire_within_limit(self): ...
    def test_acquire_exceeds_global_limit(self): ...
    def test_acquire_exceeds_user_limit(self): ...
    def test_release_decrements_counter(self): ...

# Integration Tests
class TestAuthAPI:
    async def test_register_creates_pending_user(self): ...
    async def test_login_rejects_pending_user(self): ...
    async def test_login_accepts_active_user(self): ...

class TestStreamAPI:
    async def test_stream_returns_206_with_range(self): ...
    async def test_stream_returns_429_when_limited(self): ...
```

**Coverage Target**: 80%+

```bash
# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest api/tests/ -v --cov=app --cov-report=html

# ë‹¨ì¼ í…ŒìŠ¤íŠ¸
pytest api/tests/unit/test_cache_service.py -v

# í†µí•© í…ŒìŠ¤íŠ¸ë§Œ
pytest api/tests/integration/ -v
```

### 12.3 Frontend í…ŒìŠ¤íŠ¸

**ë„êµ¬**:
- **Vitest**: ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- **Playwright**: E2E ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

**ë””ë ‰í† ë¦¬ êµ¬ì¡°**:
```
web/tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ VideoPlayer.test.ts
â”‚   â””â”€â”€ ContentCard.test.ts
â”œâ”€â”€ e2e/
â”‚   â”œâ”€â”€ auth.spec.ts
â”‚   â”œâ”€â”€ browse.spec.ts
â”‚   â””â”€â”€ watch.spec.ts
â””â”€â”€ fixtures/
```

**E2E ì‹œë‚˜ë¦¬ì˜¤**:
```typescript
// e2e/auth.spec.ts
test('ì‚¬ìš©ì ê°€ì… ë° ìŠ¹ì¸ í”Œë¡œìš°', async ({ page }) => {
  // 1. íšŒì›ê°€ì…
  await page.goto('/register');
  await page.fill('[name="username"]', 'testuser');
  await page.click('button[type="submit"]');
  await expect(page.locator('.pending-message')).toBeVisible();

  // 2. ê´€ë¦¬ì ìŠ¹ì¸ (ë³„ë„ ì„¸ì…˜)
  // 3. ë¡œê·¸ì¸ ì„±ê³µ í™•ì¸
});

// e2e/watch.spec.ts
test('ë¹„ë””ì˜¤ ì¬ìƒ ë° ì´ì–´ë³´ê¸°', async ({ page }) => {
  await page.goto('/watch/content-123');
  await page.waitForSelector('video');
  // Seek to 50%
  // Close and reopen
  // Verify resume from 50%
});
```

```bash
# Frontend í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test              # Vitest
npm run test:e2e          # Playwright
```

### 12.4 í…ŒìŠ¤íŠ¸ ë°ì´í„°

| ë°ì´í„° | ìš©ë„ | ìœ„ì¹˜ |
|--------|------|------|
| sample_video.mp4 | ìŠ¤íŠ¸ë¦¬ë° í…ŒìŠ¤íŠ¸ (10ì´ˆ, 1MB) | tests/fixtures/ |
| admin@test.com | ê´€ë¦¬ì ê³„ì • | seed ìŠ¤í¬ë¦½íŠ¸ |
| user@test.com | ì¼ë°˜ ì‚¬ìš©ì (Active) | seed ìŠ¤í¬ë¦½íŠ¸ |
| pending@test.com | ëŒ€ê¸° ì‚¬ìš©ì | seed ìŠ¤í¬ë¦½íŠ¸ |

```python
# scripts/seed_test_data.py
async def seed():
    # Admin user
    await create_user("admin", "admin@test.com", is_admin=True, status="active")
    # Active user
    await create_user("testuser", "user@test.com", status="active")
    # Pending user
    await create_user("pending", "pending@test.com", status="pending")
    # Sample content
    await create_content("Test Video", "tests/fixtures/sample_video.mp4")
```

---

## 13. Error Handling

### 13.1 ê¸€ë¡œë²Œ ì—ëŸ¬ ì‘ë‹µ í˜•ì‹

ëª¨ë“  API ì—ëŸ¬ëŠ” ì¼ê´€ëœ JSON í˜•ì‹ìœ¼ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤:

```json
{
  "error": {
    "code": "AUTH_INVALID_TOKEN",
    "message": "ì¸ì¦ í† í°ì´ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
    "details": {
      "expired_at": "2025-12-11T10:00:00Z"
    }
  }
}
```

**FastAPI Exception Handler**:
```python
# app/core/exceptions.py
class AppException(Exception):
    def __init__(self, code: str, message: str, status_code: int = 400, details: dict = None):
        self.code = code
        self.message = message
        self.status_code = status_code
        self.details = details or {}

# app/main.py
@app.exception_handler(AppException)
async def app_exception_handler(request: Request, exc: AppException):
    return JSONResponse(
        status_code=exc.status_code,
        content={
            "error": {
                "code": exc.code,
                "message": exc.message,
                "details": exc.details
            }
        }
    )
```

### 13.2 ì—ëŸ¬ ì½”ë“œ ì²´ê³„

| Prefix | ë²”ìœ„ | ì˜ˆì‹œ ì½”ë“œ |
|--------|------|-----------|
| `AUTH_` | ì¸ì¦/ì¸ê°€ | `AUTH_INVALID_CREDENTIALS`, `AUTH_EXPIRED_TOKEN`, `AUTH_USER_PENDING` |
| `CONTENT_` | ì½˜í…ì¸  | `CONTENT_NOT_FOUND`, `CONTENT_FILE_MISSING` |
| `STREAM_` | ìŠ¤íŠ¸ë¦¬ë° | `STREAM_RATE_LIMITED`, `STREAM_FILE_ERROR` |
| `CACHE_` | ìºì‹œ | `CACHE_NAS_UNAVAILABLE`, `CACHE_SSD_FULL` |
| `ADMIN_` | ê´€ë¦¬ì | `ADMIN_FORBIDDEN`, `ADMIN_USER_NOT_FOUND` |
| `VALIDATION_` | ìœ íš¨ì„± | `VALIDATION_INVALID_EMAIL`, `VALIDATION_WEAK_PASSWORD` |

```python
# app/core/error_codes.py
class ErrorCode:
    # Auth
    AUTH_INVALID_CREDENTIALS = ("AUTH_INVALID_CREDENTIALS", "ì˜ëª»ëœ ì¸ì¦ ì •ë³´ì…ë‹ˆë‹¤.", 401)
    AUTH_EXPIRED_TOKEN = ("AUTH_EXPIRED_TOKEN", "í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.", 401)
    AUTH_USER_PENDING = ("AUTH_USER_PENDING", "ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ê³„ì •ì…ë‹ˆë‹¤.", 403)
    AUTH_USER_REJECTED = ("AUTH_USER_REJECTED", "ê±°ë¶€ëœ ê³„ì •ì…ë‹ˆë‹¤.", 403)
    AUTH_USER_SUSPENDED = ("AUTH_USER_SUSPENDED", "ì •ì§€ëœ ê³„ì •ì…ë‹ˆë‹¤.", 403)

    # Stream
    STREAM_RATE_LIMITED_GLOBAL = ("STREAM_RATE_LIMITED", "ì„œë²„ ë™ì‹œ ì ‘ì† í•œë„ ì´ˆê³¼ì…ë‹ˆë‹¤.", 429)
    STREAM_RATE_LIMITED_USER = ("STREAM_RATE_LIMITED", "ë™ì‹œ ì¬ìƒ 3ê°œ ì´ˆê³¼ì…ë‹ˆë‹¤.", 429)

    # Content
    CONTENT_NOT_FOUND = ("CONTENT_NOT_FOUND", "ì½˜í…ì¸ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", 404)
```

### 13.3 HTTP ìƒíƒœ ì½”ë“œ ë§¤í•‘

| Status | ì‚¬ìš© ì¼€ì´ìŠ¤ | ì—ëŸ¬ ì½”ë“œ ì˜ˆì‹œ |
|--------|------------|---------------|
| 400 | ì˜ëª»ëœ ìš”ì²­ (ìœ íš¨ì„± ê²€ì¦ ì‹¤íŒ¨) | `VALIDATION_*` |
| 401 | ì¸ì¦ í•„ìš”/ì‹¤íŒ¨ | `AUTH_INVALID_*`, `AUTH_EXPIRED_*` |
| 403 | ê¶Œí•œ ì—†ìŒ | `AUTH_USER_PENDING`, `ADMIN_FORBIDDEN` |
| 404 | ë¦¬ì†ŒìŠ¤ ì—†ìŒ | `CONTENT_NOT_FOUND` |
| 429 | Rate Limit ì´ˆê³¼ | `STREAM_RATE_LIMITED` |
| 500 | ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ | `INTERNAL_ERROR` |
| 503 | ì„œë¹„ìŠ¤ ë¶ˆê°€ (NAS ì—°ê²° ì‹¤íŒ¨) | `CACHE_NAS_UNAVAILABLE` |

### 13.4 Graceful Degradation

ì™¸ë¶€ ì„œë¹„ìŠ¤ ì¥ì•  ì‹œ ëŒ€ì²´ ë™ì‘:

| ì¥ì•  ìƒí™© | íƒì§€ ë°©ë²• | ëŒ€ì‘ ì „ëµ | ì‚¬ìš©ì ì˜í–¥ |
|----------|----------|----------|------------|
| **Redis ë‹¤ìš´** | ConnectionError | DB ì§ì ‘ ì¡°íšŒ | ì‘ë‹µ ì§€ì—° (100ms â†’ 500ms) |
| **MeiliSearch ë‹¤ìš´** | ConnectionError | PostgreSQL LIKE ê²€ìƒ‰ | ê²€ìƒ‰ ì •í™•ë„/ì†ë„ ì €í•˜ |
| **NAS ì—°ê²° ëŠê¹€** | SMB timeout | SSD ìºì‹œë§Œ ì„œë¹„ìŠ¤ | ìºì‹œ ë¯¸ìŠ¤ ì‹œ 503 |
| **FFmpeg ì‹¤íŒ¨** | Process exit code | ê¸°ë³¸ ì¸ë„¤ì¼ ë°˜í™˜ | ì¼ë¶€ ì¸ë„¤ì¼ ë¯¸í‘œì‹œ |

```python
# Graceful degradation ì˜ˆì‹œ
class SearchService:
    async def search(self, query: str) -> list[Content]:
        try:
            # Primary: MeiliSearch
            return await self.meilisearch.search(query)
        except MeiliSearchError:
            logger.warning("MeiliSearch unavailable, falling back to DB")
            # Fallback: PostgreSQL LIKE
            return await self.db_search(query)

    async def db_search(self, query: str) -> list[Content]:
        return await db.execute(
            select(Content).where(
                Content.title.ilike(f"%{query}%")
            ).limit(20)
        )
```

---

## 14. Logging & Monitoring

### 14.1 ë¡œê·¸ ë ˆë²¨

| Level | ìš©ë„ | ì˜ˆì‹œ |
|-------|------|------|
| **DEBUG** | ê°œë°œ ë””ë²„ê¹… | í•¨ìˆ˜ ì§„ì…/ì¢…ë£Œ, ë³€ìˆ˜ ê°’ |
| **INFO** | ìš”ì²­/ì‘ë‹µ, ì£¼ìš” ì´ë²¤íŠ¸ | ìŠ¤íŠ¸ë¦¼ ì‹œì‘, ë¡œê·¸ì¸ ì„±ê³µ |
| **WARNING** | ì ì¬ì  ë¬¸ì œ | ìºì‹œ ë¯¸ìŠ¤, ì¬ì‹œë„, ëŠë¦° ì¿¼ë¦¬ |
| **ERROR** | ë³µêµ¬ ê°€ëŠ¥í•œ ì˜¤ë¥˜ | API ì—ëŸ¬, ì¸ì¦ ì‹¤íŒ¨ |
| **CRITICAL** | ì‹œìŠ¤í…œ ì¤‘ë‹¨ ìˆ˜ì¤€ | NAS ì—°ê²° ì‹¤íŒ¨, DB ë‹¤ìš´ |

### 14.2 ë¡œê·¸ í¬ë§· (JSON)

```json
{
  "timestamp": "2025-12-11T10:30:00.123Z",
  "level": "INFO",
  "service": "api",
  "request_id": "req-uuid-1234",
  "user_id": "user-123",
  "action": "stream_start",
  "message": "Stream started successfully",
  "context": {
    "content_id": "content-abc",
    "cache_hit": true,
    "source": "ssd"
  },
  "duration_ms": 45
}
```

**ë¡œê¹… ì„¤ì •**:
```python
# app/core/logging.py
import structlog

structlog.configure(
    processors=[
        structlog.processors.TimeStamper(fmt="iso"),
        structlog.processors.JSONRenderer()
    ]
)

logger = structlog.get_logger()

# ì‚¬ìš© ì˜ˆì‹œ
logger.info(
    "stream_start",
    user_id=user.id,
    content_id=content_id,
    cache_hit=True,
    source="ssd"
)
```

### 14.3 ìš”ì²­ ì¶”ì  (Request ID)

ëª¨ë“  ìš”ì²­ì— ê³ ìœ  ID ë¶€ì—¬:

```python
# app/middleware/request_id.py
@app.middleware("http")
async def add_request_id(request: Request, call_next):
    request_id = request.headers.get("X-Request-ID", str(uuid.uuid4()))
    request.state.request_id = request_id

    response = await call_next(request)
    response.headers["X-Request-ID"] = request_id
    return response
```

### 14.4 ë©”íŠ¸ë¦­ ìˆ˜ì§‘

| Metric | íƒ€ì… | ìˆ˜ì§‘ ë°©ë²• | ì•Œë¦¼ ì„ê³„ê°’ |
|--------|------|----------|------------|
| `streams_active` | Gauge | Redis `stream:active` | > 18 (90%) |
| `streams_total` | Counter | ìš”ì²­ ì¹´ìš´íŠ¸ | - |
| `cache_hit_rate` | Gauge | L2 ìºì‹œ ë¡œê·¸ ì§‘ê³„ | < 40% |
| `api_latency_p99` | Histogram | ë¯¸ë“¤ì›¨ì–´ ì¸¡ì • | > 500ms |
| `error_rate` | Gauge | ì—ëŸ¬ ë¡œê·¸ / ì „ì²´ ìš”ì²­ | > 5% |
| `ssd_cache_usage` | Gauge | ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ | > 90% |

```python
# ë©”íŠ¸ë¦­ ë¯¸ë“¤ì›¨ì–´
@app.middleware("http")
async def metrics_middleware(request: Request, call_next):
    start = time.perf_counter()
    response = await call_next(request)
    duration = (time.perf_counter() - start) * 1000

    logger.info(
        "request_completed",
        method=request.method,
        path=request.url.path,
        status=response.status_code,
        duration_ms=duration
    )
    return response
```

### 14.5 ì•Œë¦¼ ì¡°ê±´

| ì¡°ê±´ | ì„ê³„ê°’ | ì•Œë¦¼ ë°©ë²• | ìš°ì„ ìˆœìœ„ |
|------|--------|----------|---------|
| NAS ì—°ê²° ì‹¤íŒ¨ | 1íšŒ | ì¦‰ì‹œ ì•Œë¦¼ | P0 |
| ì—ëŸ¬ìœ¨ ê¸‰ì¦ | 5ë¶„ê°„ 10%+ | ì¦‰ì‹œ ì•Œë¦¼ | P0 |
| ë™ì‹œ ìŠ¤íŠ¸ë¦¼ í•œë„ | 18/20 (90%) | ê²½ê³  | P1 |
| SSD ìºì‹œ ìš©ëŸ‰ | 90%+ | ê²½ê³  | P1 |
| API ì‘ë‹µ ì§€ì—° | P99 > 1ì´ˆ | ê²½ê³  | P2 |

### 14.6 ë¡œê·¸ ì €ì¥ ìœ„ì¹˜

```
D:\WSOPTV\logs\
â”œâ”€â”€ api\
â”‚   â”œâ”€â”€ api.log           # í˜„ì¬ ë¡œê·¸
â”‚   â”œâ”€â”€ api.log.1         # ë¡œí…Œì´ì…˜ (1ì¼ ë³´ê´€)
â”‚   â””â”€â”€ ...
â”œâ”€â”€ stream\
â”‚   â””â”€â”€ stream.log        # ìŠ¤íŠ¸ë¦¬ë° ì „ìš© ë¡œê·¸
â””â”€â”€ error\
    â””â”€â”€ error.log         # ì—ëŸ¬ ì „ìš© (30ì¼ ë³´ê´€)
```

---

## 15. Backup Strategy

### 15.1 ë°±ì—… ëŒ€ìƒ

| ëŒ€ìƒ | ì£¼ê¸° | ë³´ê´€ ê¸°ê°„ | ì €ì¥ ìœ„ì¹˜ | ë°©ë²• |
|------|------|----------|----------|------|
| **PostgreSQL** | ì¼ 1íšŒ (03:00) | 30ì¼ | `Z:\BACKUP\db\` | pg_dump + gzip |
| **Redis RDB** | ì‹œê°„ 1íšŒ | 7ì¼ | `Z:\BACKUP\redis\` | BGSAVE + ë³µì‚¬ |
| **ì„¤ì • íŒŒì¼** | ë³€ê²½ ì‹œ | Git ê¸°ë¡ | GitHub | .env ì œì™¸ |
| **MeiliSearch ì¸ë±ìŠ¤** | ì£¼ 1íšŒ | 4ì£¼ | `Z:\BACKUP\meili\` | ìŠ¤ëƒ…ìƒ· |

### 15.2 ë°±ì—… ìŠ¤í¬ë¦½íŠ¸

```powershell
# scripts/backup.ps1
param(
    [string]$Type = "all"  # all, db, redis, meili
)

$date = Get-Date -Format "yyyyMMdd-HHmmss"
$backupRoot = "Z:\BACKUP"

function Backup-Database {
    Write-Host "Backing up PostgreSQL..." -ForegroundColor Cyan
    $output = "$backupRoot\db\wsoptv-$date.sql.gz"

    $env:PGPASSWORD = $env:DB_PASSWORD
    pg_dump -h localhost -U wsoptv wsoptv | gzip > $output

    Write-Host "Database backup: $output" -ForegroundColor Green

    # 30ì¼ ì´ìƒ ëœ ë°±ì—… ì‚­ì œ
    Get-ChildItem "$backupRoot\db\*.gz" |
        Where-Object { $_.LastWriteTime -lt (Get-Date).AddDays(-30) } |
        Remove-Item
}

function Backup-Redis {
    Write-Host "Backing up Redis..." -ForegroundColor Cyan

    # BGSAVE ì‹¤í–‰
    redis-cli BGSAVE
    Start-Sleep -Seconds 5

    $output = "$backupRoot\redis\dump-$date.rdb"
    Copy-Item "D:\WSOPTV\redis\dump.rdb" $output

    Write-Host "Redis backup: $output" -ForegroundColor Green

    # 7ì¼ ì´ìƒ ëœ ë°±ì—… ì‚­ì œ
    Get-ChildItem "$backupRoot\redis\*.rdb" |
        Where-Object { $_.LastWriteTime -lt (Get-Date).AddDays(-7) } |
        Remove-Item
}

function Backup-MeiliSearch {
    Write-Host "Backing up MeiliSearch..." -ForegroundColor Cyan
    $output = "$backupRoot\meili\meili-$date"

    # MeiliSearch ìŠ¤ëƒ…ìƒ· ìƒì„±
    Invoke-RestMethod -Uri "http://localhost:7700/snapshots" -Method Post
    Start-Sleep -Seconds 10

    Copy-Item "D:\WSOPTV\meili\snapshots\*" $output -Recurse

    Write-Host "MeiliSearch backup: $output" -ForegroundColor Green
}

switch ($Type) {
    "db"    { Backup-Database }
    "redis" { Backup-Redis }
    "meili" { Backup-MeiliSearch }
    "all"   {
        Backup-Database
        Backup-Redis
        Backup-MeiliSearch
    }
}

Write-Host "`nBackup completed!" -ForegroundColor Green
```

### 15.3 ìë™ ë°±ì—… ìŠ¤ì¼€ì¤„

```powershell
# Windows Task Scheduler ë“±ë¡
# scripts/setup-backup-schedule.ps1

$action = New-ScheduledTaskAction -Execute "powershell.exe" `
    -Argument "-File D:\WSOPTV\scripts\backup.ps1 -Type all"

$trigger = New-ScheduledTaskTrigger -Daily -At "03:00"

Register-ScheduledTask -TaskName "WSOPTV-DailyBackup" `
    -Action $action -Trigger $trigger `
    -Description "WSOPTV ì¼ì¼ ë°±ì—…"
```

### 15.4 ë³µêµ¬ ì ˆì°¨

#### PostgreSQL ë³µêµ¬
```powershell
# 1. ì„œë¹„ìŠ¤ ì¤‘ì§€
Stop-Service postgresql-x64-16

# 2. ìµœì‹  ë°±ì—… í™•ì¸
$latest = Get-ChildItem "Z:\BACKUP\db\*.gz" | Sort-Object LastWriteTime -Descending | Select-Object -First 1

# 3. ë³µì›
$env:PGPASSWORD = $env:DB_PASSWORD
gunzip -c $latest.FullName | psql -h localhost -U wsoptv -d wsoptv

# 4. ì„œë¹„ìŠ¤ ì‹œì‘
Start-Service postgresql-x64-16
```

#### Redis ë³µêµ¬
```powershell
# 1. Redis ì¤‘ì§€
Stop-Process -Name redis-server

# 2. ìµœì‹  ë°±ì—… ë³µì‚¬
$latest = Get-ChildItem "Z:\BACKUP\redis\*.rdb" | Sort-Object LastWriteTime -Descending | Select-Object -First 1
Copy-Item $latest.FullName "D:\WSOPTV\redis\dump.rdb"

# 3. Redis ì‹œì‘
Start-Process redis-server -WindowStyle Hidden
```

#### SSD ìºì‹œ
```
ìºì‹œëŠ” ë³µêµ¬ ë¶ˆí•„ìš” - ìš”ì²­ ì‹œ ìë™ ì¬ìƒì„±ë¨
```

### 15.5 DR (Disaster Recovery)

| ì‹œë‚˜ë¦¬ì˜¤ | RTO (ë³µêµ¬ ì‹œê°„) | RPO (ë°ì´í„° ì†ì‹¤) | ë³µêµ¬ ì ˆì°¨ |
|----------|----------------|------------------|----------|
| **DB ì†ìƒ** | 1ì‹œê°„ | ìµœëŒ€ 24ì‹œê°„ | ìµœì‹  ë°±ì—…ì—ì„œ ë³µì› |
| **Redis ì†ìƒ** | 15ë¶„ | ìµœëŒ€ 1ì‹œê°„ | RDB íŒŒì¼ ë³µì› |
| **ì„œë²„ ì¥ì• ** | 4ì‹œê°„ | ìµœëŒ€ 24ì‹œê°„ | ìƒˆ ì„œë²„ í”„ë¡œë¹„ì €ë‹ + ë°±ì—… ë³µì› |
| **SSD ì¥ì• ** | 30ë¶„ | 0 (ìºì‹œë§Œ) | SSD êµì²´ + ìºì‹œ ì¬ìƒì„± |
| **NAS ì¥ì• ** | - | ì½˜í…ì¸  ë³µêµ¬ ë¶ˆê°€ | NAS ë³µêµ¬ ëŒ€ê¸° (ë³„ë„ ë°±ì—… í•„ìš”) |

### 15.6 ë°±ì—… ê²€ì¦

ì›” 1íšŒ ë³µêµ¬ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰:

```powershell
# scripts/verify-backup.ps1
# í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ìµœì‹  ë°±ì—… ë³µì› í›„ ë¬´ê²°ì„± ê²€ì¦

# 1. í…ŒìŠ¤íŠ¸ DBì— ë³µì›
$latest = Get-ChildItem "Z:\BACKUP\db\*.gz" | Sort-Object LastWriteTime -Descending | Select-Object -First 1
gunzip -c $latest.FullName | psql -h localhost -U wsoptv -d wsoptv_test

# 2. ë ˆì½”ë“œ ìˆ˜ í™•ì¸
psql -h localhost -U wsoptv -d wsoptv_test -c "SELECT COUNT(*) FROM users;"
psql -h localhost -U wsoptv -d wsoptv_test -c "SELECT COUNT(*) FROM contents;"

# 3. ê²°ê³¼ ë¡œê¹…
Write-Host "Backup verification completed: $latest" -ForegroundColor Green
```

---

## 16. Block Architecture & Agent Separation

### 16.1 ë¬¸ì œ í•´ê²° ëª©í‘œ

```
[ê¸°ì¡´ ë¬¸ì œ]
Claude 1ê°œ â†’ ì „ì²´ ì½”ë“œë² ì´ìŠ¤ â†’ ì»¨í…ìŠ¤íŠ¸ í­ë°œ â†’ ë§ê° â†’ ì½”ë“œ ì˜¤ì—¼

[í•´ê²°ì±…]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Orchestration Layer                       â”‚
â”‚                   (ì»¨í…ìŠ¤íŠ¸ ìµœì†Œí™”)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Auth   â”‚  â”‚ Content â”‚  â”‚ Stream  â”‚  â”‚  Cache  â”‚       â”‚
â”‚  â”‚  Block  â”‚  â”‚  Block  â”‚  â”‚  Block  â”‚  â”‚  Block  â”‚       â”‚
â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚       â”‚
â”‚  â”‚ Agent A â”‚  â”‚ Agent B â”‚  â”‚ Agent C â”‚  â”‚ Agent D â”‚       â”‚
â”‚  â”‚ PRD-A   â”‚  â”‚ PRD-B   â”‚  â”‚ PRD-C   â”‚  â”‚ PRD-D   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚       â”‚            â”‚            â”‚            â”‚              â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                          â”‚                                   â”‚
â”‚                    [Message Bus]                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â†’ ê° ì—ì´ì „íŠ¸ëŠ” ìê¸° ë¸”ëŸ­ë§Œ ì§‘ì¤‘ â†’ ì»¨í…ìŠ¤íŠ¸ ìœ ì§€ â†’ ì˜¤ì—¼ ë°©ì§€
```

### 16.2 Block List

| Block ID | ì´ë¦„ | ì±…ì„ | ì „ë‹´ ì—ì´ì „íŠ¸ | PRD |
|----------|------|------|---------------|-----|
| `auth` | Auth Block | ì¸ì¦, ì¸ê°€, ì‚¬ìš©ì ê´€ë¦¬ | `auth-agent` | `docs/blocks/01-auth.md` |
| `content` | Content Block | ì½˜í…ì¸  CRUD, ì¹´íƒˆë¡œê·¸ | `content-agent` | `docs/blocks/02-content.md` |
| `stream` | Stream Block | ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë° | `stream-agent` | `docs/blocks/03-stream.md` |
| `cache` | Cache Block | 4-Tier ìºì‹œ ê´€ë¦¬ | `cache-agent` | `docs/blocks/04-cache.md` |
| `admin` | Admin Block | ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ | `admin-agent` | `docs/blocks/05-admin.md` |
| `search` | Search Block | MeiliSearch ê²€ìƒ‰ | `search-agent` | `docs/blocks/06-search.md` |
| `worker` | Worker Block | ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… | `worker-agent` | `docs/blocks/07-worker.md` |

### 16.3 í•µì‹¬ ì›ì¹™

| ì›ì¹™ | ì„¤ëª… |
|------|------|
| **ë¸”ëŸ­ ë…ë¦½ì„±** | ê° ë¸”ëŸ­ì€ ìì²´ PRD, í…ŒìŠ¤íŠ¸, ì—ì´ì „íŠ¸ë¥¼ ê°€ì§ |
| **ì¤‘ì•™ ì¡°ìœ¨** | ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ë§Œ ë¸”ëŸ­ ê°„ í†µì‹  ì¤‘ì¬ |
| **ê³„ì•½ ê¸°ë°˜** | ë¸”ëŸ­ ê°„ ì¸í„°í˜ì´ìŠ¤ëŠ” ëª…ì‹œì  ê³„ì•½ìœ¼ë¡œ ì •ì˜ |
| **ì¥ì•  ê²©ë¦¬** | í•œ ë¸”ëŸ­ ì‹¤íŒ¨ê°€ ë‹¤ë¥¸ ë¸”ëŸ­ì— ì „íŒŒë˜ì§€ ì•ŠìŒ |

### 16.4 ì—ì´ì „íŠ¸ ê·œì¹™

ê° ë¸”ëŸ­ ì „ë‹´ ì—ì´ì „íŠ¸ëŠ” ë‹¤ìŒ ê·œì¹™ì„ ì¤€ìˆ˜:

```markdown
## [Block] ì „ë‹´ ì—ì´ì „íŠ¸ ê·œì¹™

1. **ì»¨í…ìŠ¤íŠ¸ ì œí•œ**
   - `api/app/blocks/[block]/` ë””ë ‰í† ë¦¬ë§Œ ìˆ˜ì •
   - ë‹¤ë¥¸ ë¸”ëŸ­ ì½”ë“œ ì½ê¸° ê¸ˆì§€ (ì¸í„°í˜ì´ìŠ¤ë§Œ ì°¸ì¡°)

2. **ìˆ˜ì • ê°€ëŠ¥ íŒŒì¼**
   - `api/app/blocks/[block]/**/*`
   - `tests/blocks/[block]/**/*`
   - `docs/blocks/[block].md`

3. **ìˆ˜ì • ë¶ˆê°€ íŒŒì¼**
   - `api/app/blocks/*/` (ë‹¤ë¥¸ ë¸”ëŸ­)
   - `api/app/orchestration/` (ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°)

4. **í†µì‹  ê·œì¹™**
   - ë‹¤ë¥¸ ë¸”ëŸ­ í˜¸ì¶œ ì‹œ ë°˜ë“œì‹œ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° ê²½ìœ 
   - ì§ì ‘ import ê¸ˆì§€
```

### 16.5 ë¸”ëŸ­ ê°„ í†µì‹ 

```python
# âŒ ê¸ˆì§€: ì§ì ‘ import
from api.app.blocks.auth.service import AuthService

# âœ… ê¶Œì¥: ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° ê²½ìœ 
user = await orchestrator.request(
    target="auth",
    action="validate_token",
    payload={"token": token}
)
```

### 16.6 Directory Structure

```
api/app/
â”œâ”€â”€ orchestration/           # ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë ˆì´ì–´
â”‚   â”œâ”€â”€ orchestrator.py      # ë©”ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
â”‚   â”œâ”€â”€ message_bus.py       # Redis Pub/Sub
â”‚   â”œâ”€â”€ registry.py          # ë¸”ëŸ­ ë ˆì§€ìŠ¤íŠ¸ë¦¬
â”‚   â””â”€â”€ contracts/           # ë¸”ëŸ­ ê°„ ê³„ì•½
â”‚
â”œâ”€â”€ blocks/                  # ë¸”ëŸ­ë“¤ (ë…ë¦½ ë‹¨ìœ„)
â”‚   â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ stream/
â”‚   â”œâ”€â”€ cache/
â”‚   â”œâ”€â”€ admin/
â”‚   â”œâ”€â”€ search/
â”‚   â””â”€â”€ worker/
â”‚
â””â”€â”€ main.py                  # ë¸”ëŸ­ ë“±ë¡

docs/blocks/
â”œâ”€â”€ 00-orchestration.md     # ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ PRD
â”œâ”€â”€ 01-auth.md              # Auth Block PRD
â”œâ”€â”€ 02-content.md           # Content Block PRD
â”œâ”€â”€ 03-stream.md            # Stream Block PRD
â”œâ”€â”€ 04-cache.md             # Cache Block PRD
â”œâ”€â”€ 05-admin.md             # Admin Block PRD
â”œâ”€â”€ 06-search.md            # Search Block PRD
â””â”€â”€ 07-worker.md            # Worker Block PRD
```

### 16.7 Success Metrics

| Metric | Target |
|--------|--------|
| ë¸”ëŸ­ ë…ë¦½ì„± | ë¸”ëŸ­ ê°„ ì§ì ‘ import 0 |
| ì—ì´ì „íŠ¸ ì»¨í…ìŠ¤íŠ¸ | ë¸”ëŸ­ë‹¹ < 500ì¤„ |
| ì¥ì•  ê²©ë¦¬ | í•œ ë¸”ëŸ­ ì¥ì•  ì‹œ ë‹¤ë¥¸ ë¸”ëŸ­ ì •ìƒ |
| í…ŒìŠ¤íŠ¸ ë…ë¦½ì„± | Mock ì—†ì´ ë‹¤ë¥¸ ë¸”ëŸ­ í˜¸ì¶œ 0 |

---

## Appendix

### A. NAS íŒŒì¼ êµ¬ì¡° ì˜ˆì‹œ

```
Z:\ARCHIVE\
â”œâ”€â”€ WSOP\
â”‚   â”œâ”€â”€ 2024\
â”‚   â”‚   â”œâ”€â”€ Main Event\
â”‚   â”‚   â”‚   â”œâ”€â”€ Day 1.mp4
â”‚   â”‚   â”‚   â”œâ”€â”€ Day 2.mp4
â”‚   â”‚   â”‚   â””â”€â”€ Final Table.mp4
â”‚   â”‚   â””â”€â”€ High Roller\
â”‚   â””â”€â”€ 2023\
â”œâ”€â”€ HCL\
â”‚   â”œâ”€â”€ Season 1\
â”‚   â””â”€â”€ Season 2\
â”œâ”€â”€ PAD\
â””â”€â”€ GGMillions\
```

### B. Content Import Script

```python
# scripts/import_contents.py
async def scan_and_import(nas_root: Path):
    """NAS í´ë” ìŠ¤ìº” í›„ DBì— ë“±ë¡"""
    for catalog_dir in nas_root.iterdir():
        if not catalog_dir.is_dir():
            continue

        catalog = await get_or_create_catalog(catalog_dir.name)

        for video_file in catalog_dir.rglob("*.mp4"):
            await create_content(
                catalog_id=catalog.id,
                title=video_file.stem,
                nas_path=str(video_file),
                duration=await get_duration(video_file),
                file_size=video_file.stat().st_size
            )
```

---

**Document History**

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0.0 | 2025-12-11 | Claude Code | Initial draft |
| 1.1.0 | 2025-12-11 | Claude Code | Testing Strategy, Error Handling, Logging & Monitoring, Backup Strategy ì„¹ì…˜ ì¶”ê°€ |
| 1.2.0 | 2025-12-11 | Claude Code | Block Architecture & Agent Separation ì„¹ì…˜ ì¶”ê°€ (Section 16) |
| 1.3.0 | 2025-12-11 | Claude Code | ì´ˆê¸° ê´€ë¦¬ì ê³„ì • (garimto/1234) ë° íšŒì›ê°€ì… í”Œë¡œìš° ìƒì„¸ ëª…ì„¸ ì¶”ê°€ (Section 5.1) |
| 1.4.0 | 2025-12-11 | Claude Code | Netflix ìŠ¤íƒ€ì¼ ëª©ì—… ë””ìì¸ ì¶”ê°€ - Hero Billboard, Row ë ˆì´ì•„ì›ƒ, Hover íš¨ê³¼ (Section 5.2) |
